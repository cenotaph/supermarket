"use strict";!function(){if(!jQuery||!jQuery.jstree){var t=!1,e=!1,s=!1;!function(i){i.vakata={},i.vakata.css={get_css:function(t,e,s){t=t.toLowerCase();var i=s.cssRules||s.rules,n=0;do{if(i.length&&n>i.length+5)return!1;if(i[n].selectorText&&i[n].selectorText.toLowerCase()==t)return e===!0?(s.removeRule&&s.removeRule(n),s.deleteRule&&s.deleteRule(n),!0):i[n]}while(i[++n]);return!1},add_css:function(t,e){return i.jstree.css.get_css(t,!1,e)?!1:(e.insertRule?e.insertRule(t+" { }",0):e.addRule(t,null,0),i.vakata.css.get_css(t))},remove_css:function(t,e){return i.vakata.css.get_css(t,!0,e)},add_sheet:function(t){var e=!1,s=!0;if(t.str)return t.title&&(e=i("style[id='"+t.title+"-stylesheet']")[0]),e?s=!1:(e=document.createElement("style"),e.setAttribute("type","text/css"),t.title&&e.setAttribute("id",t.title+"-stylesheet")),e.styleSheet?s?(document.getElementsByTagName("head")[0].appendChild(e),e.styleSheet.cssText=t.str):e.styleSheet.cssText=e.styleSheet.cssText+" "+t.str:(e.appendChild(document.createTextNode(t.str)),document.getElementsByTagName("head")[0].appendChild(e)),e.sheet||e.styleSheet;if(t.url){if(!document.createStyleSheet)return e=document.createElement("link"),e.rel="stylesheet",e.type="text/css",e.media="all",e.href=t.url,document.getElementsByTagName("head")[0].appendChild(e),e.styleSheet;try{e=document.createStyleSheet(t.url)}catch(n){}}}};var n=[],a=-1,r={},o={};i.fn.jstree=function(t){var e="string"==typeof t,s=Array.prototype.slice.call(arguments,1),a=this;if(e){if("_"==t.substring(0,1))return a;this.each(function(){var e=n[i.data(this,"jstree_instance_id")],r=e&&i.isFunction(e[t])?e[t].apply(e,s):e;return"undefined"!=typeof r&&(0===t.indexOf("is_")||r!==!0&&r!==!1)?(a=r,!1):void 0})}else this.each(function(){var e=i.data(this,"jstree_instance_id"),a=[],o=t?i.extend({},!0,t):{},l=i(this),d=!1,c=[];a=a.concat(s),l.data("jstree")&&a.push(l.data("jstree")),o=a.length?i.extend.apply(null,[!0,o].concat(a)):o,"undefined"!=typeof e&&n[e]&&n[e].destroy(),e=parseInt(n.push({}),10)-1,i.data(this,"jstree_instance_id",e),o.plugins=i.isArray(o.plugins)?o.plugins:i.jstree.defaults.plugins.slice(),o.plugins.unshift("core"),o.plugins=o.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(","),d=i.extend(!0,{},i.jstree.defaults,o),d.plugins=o.plugins,i.each(r,function(t){-1===i.inArray(t,d.plugins)?(d[t]=null,delete d[t]):c.push(t)}),d.plugins=c,n[e]=new i.jstree._instance(e,i(this).addClass("jstree jstree-"+e),d),i.each(n[e]._get_settings().plugins,function(t,s){n[e].data[s]={}}),i.each(n[e]._get_settings().plugins,function(t,s){r[s]&&r[s].__init.apply(n[e])}),setTimeout(function(){n[e]&&n[e].init()},0)});return a},i.jstree={defaults:{plugins:[]},_focused:function(){return n[a]||null},_reference:function(t){if(n[t])return n[t];var e=i(t);return e.length||"string"!=typeof t||(e=i("#"+t)),e.length?n[e.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(t,e,s){this.data={core:{}},this.get_settings=function(){return i.extend(!0,{},s)},this._get_settings=function(){return s},this.get_index=function(){return t},this.get_container=function(){return e},this.get_container_ul=function(){return e.children("ul:eq(0)")},this._set_settings=function(t){s=i.extend(!0,{},s,t)}},_fn:{},plugin:function(t,e){e=i.extend({},{__init:i.noop,__destroy:i.noop,_fn:{},defaults:!1},e),r[t]=e,i.jstree.defaults[t]=e.defaults,i.each(e._fn,function(e,s){s.plugin=t,s.old=i.jstree._fn[e],i.jstree._fn[e]=function(){var t,n=s,a=Array.prototype.slice.call(arguments),r=new i.Event("before.jstree"),o=!1;if(this.data.core.locked!==!0||"unlock"===e||"is_locked"===e){do{if(n&&n.plugin&&-1!==i.inArray(n.plugin,this._get_settings().plugins))break;n=n.old}while(n);if(n){if(0===e.indexOf("_"))t=n.apply(this,a);else{if(t=this.get_container().triggerHandler(r,{func:e,inst:this,args:a,plugin:n.plugin}),t===!1)return;"undefined"!=typeof t&&(a=t),t=n.apply(i.extend({},this,{__callback:function(t){this.get_container().triggerHandler(e+".jstree",{inst:this,args:a,rslt:t,rlbk:o})},__rollback:function(){return o=this.get_rollback()},__call_old:function(t){return n.old.apply(this,t?Array.prototype.slice.call(arguments,1):a)}}),a)}return t}}},i.jstree._fn[e].old=s.old,i.jstree._fn[e].plugin=t})},rollback:function(t){t&&(i.isArray(t)||(t=[t]),i.each(t,function(t,e){n[e.i].set_rollback(e.h,e.d)}))}},i.jstree._fn=i.jstree._instance.prototype={},i(function(){var n=navigator.userAgent.toLowerCase(),a=(n.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],r=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";if(/msie/.test(n)&&6==parseInt(a,10)){t=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(o){}r+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(n)&&7==parseInt(a,10)&&(e=!0,r+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "),!/compatible/.test(n)&&/mozilla/.test(n)&&parseFloat(a,10)<1.9&&(s=!0,r+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } "),i.vakata.css.add_sheet({str:r,title:"jstree"})}),i.jstree.plugin("core",{__init:function(){this.data.core.locked=!1,this.data.core.to_open=this.get_settings().core.initially_open,this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus(),this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl"),this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_string("loading")+"</a></li></ul>"),this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18,this.get_container().delegate("li > ins","click.jstree",i.proxy(function(t){var e=i(t.target);this.toggle_node(e)},this)).bind("mousedown.jstree",i.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(){var t;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(e){}}}),this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",i.proxy(function(t,e){var s=this._get_node(e.rslt.obj),n=this;-1===s&&(s=this.get_container_ul()),s.length&&s.find("li").each(function(){var t=i(this);t.data("jstree")&&i.each(t.data("jstree"),function(e,s){n.data[e]&&i.isFunction(n["_"+e+"_notify"])&&n["_"+e+"_notify"].call(n,t,s)})})},this)),this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",i.proxy(function(t,e){var s=this._get_node(e.rslt.obj),n=this;-1===s&&(s=this.get_container_ul()),s.length&&s.find("li.jstree-open:not(:has(ul))").each(function(){n.load_node(this,i.noop,i.noop)})},this)),this.__callback(),this.load_node(-1,function(){this.loaded(),this.reload_nodes()})},destroy:function(){var t,e=this.get_index(),s=this._get_settings(),o=this;if(i.each(s.plugins,function(t,e){try{r[e].__destroy.apply(o)}catch(s){}}),this.__callback(),this.is_focused())for(t in n)if(n.hasOwnProperty(t)&&t!=e){n[t].set_focus();break}e===a&&(a=-1),this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),i(document).unbind(".jstree-"+e).undelegate(".jstree-"+e),n[e]=null,delete n[e]},_core_notify:function(t,e){e.opened&&this.open_node(t,!1,!0)},lock:function(){this.data.core.locked=!0,this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7"),this.__callback({})},unlock:function(){this.data.core.locked=!1,this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1"),this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var t=this;this.data.core.to_open=[],this.get_container_ul().find("li.jstree-open").each(function(){this.id&&t.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}),this.__callback(t.data.core.to_open)},save_loaded:function(){},reload_nodes:function(t){var e=this,s=!0,n=[],a=[];t||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=i.map(i.makeArray(this.data.core.to_open),function(t){return"#"+t.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=i.map(i.makeArray(this.data.core.to_load),function(t){return"#"+t.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open))),this.data.core.to_load.length&&(i.each(this.data.core.to_load,function(t,e){return"#"==e?!0:(i(e).length?n.push(e):a.push(e),void 0)}),n.length&&(this.data.core.to_load=a,i.each(n,function(t,i){e._is_loaded(i)||(e.load_node(i,function(){e.reload_nodes(!0)},function(){e.reload_nodes(!0)}),s=!1)}))),this.data.core.to_open.length&&i.each(this.data.core.to_open,function(t,s){e.open_node(s,!1,!0)}),s&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){e.__callback({},e)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var t=this;this.data.core.to_open.length&&i.each(this.data.core.to_open,function(e,s){t.open_node(s,!1,!0)}),this.__callback({})},refresh:function(t){var e=this;this.save_opened(),t||(t=-1),t=this._get_node(t),t||(t=-1),-1!==t?t.children("UL").remove():this.get_container_ul().empty(),this.load_node(t,function(){e.__callback({obj:t}),e.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var t=i.jstree._focused();t&&t.unset_focus(),this.get_container().addClass("jstree-focused"),a=this.get_index(),this.__callback()}},is_focused:function(){return a==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),a=-1),this.__callback()},_get_node:function(t){var e=i(t,this.get_container());return e.is(".jstree")||-1==t?-1:(e=e.closest("li",this.get_container()),e.length?e:!1)},_get_next:function(t,e){return t=this._get_node(t),-1===t?this.get_container().find("> ul > li:first-child"):t.length?e?t.nextAll("li").size()>0?t.nextAll("li:eq(0)"):!1:t.hasClass("jstree-open")?t.find("li:eq(0)"):t.nextAll("li").size()>0?t.nextAll("li:eq(0)"):t.parentsUntil(".jstree","li").next("li").eq(0):!1},_get_prev:function(t,e){if(t=this._get_node(t),-1===t)return this.get_container().find("> ul > li:last-child");if(!t.length)return!1;if(e)return t.prevAll("li").length>0?t.prevAll("li:eq(0)"):!1;if(t.prev("li").length){for(t=t.prev("li").eq(0);t.hasClass("jstree-open");)t=t.children("ul:eq(0)").children("li:last");return t}var s=t.parentsUntil(".jstree","li:eq(0)");return s.length?s:!1},_get_parent:function(t){if(t=this._get_node(t),-1==t||!t.length)return!1;var e=t.parentsUntil(".jstree","li:eq(0)");return e.length?e:-1},_get_children:function(t){return t=this._get_node(t),-1===t?this.get_container().children("ul:eq(0)").children("li"):t.length?t.children("ul:eq(0)").children("li"):!1},get_path:function(t,e){var s=[],i=this;return t=this._get_node(t),-1!==t&&t&&t.length?(t.parentsUntil(".jstree","li").each(function(){s.push(e?this.id:i.get_text(this))}),s.reverse(),s.push(e?t.attr("id"):this.get_text(t)),s):!1},_get_string:function(t){return this._get_settings().core.strings[t]||t},is_open:function(t){return t=this._get_node(t),t&&-1!==t&&t.hasClass("jstree-open")},is_closed:function(t){return t=this._get_node(t),t&&-1!==t&&t.hasClass("jstree-closed")},is_leaf:function(t){return t=this._get_node(t),t&&-1!==t&&t.hasClass("jstree-leaf")},correct_state:function(t){return t=this._get_node(t),t&&-1!==t?(t.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:t}),void 0):!1},open_node:function(e,s,i){if(e=this._get_node(e),!e.length)return!1;if(!e.hasClass("jstree-closed"))return s&&s.call(),!1;var n=i||t?0:this._get_settings().core.animation,a=this;this._is_loaded(e)?(this._get_settings().core.open_parents&&e.parentsUntil(".jstree",".jstree-closed").each(function(){a.open_node(this,!1,!0)}),n&&e.children("ul").css("display","none"),e.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),n?e.children("ul").stop(!0,!0).slideDown(n,function(){this.style.display="",a.after_open(e)}):a.after_open(e),this.__callback({obj:e}),s&&s.call()):(e.children("a").addClass("jstree-loading"),this.load_node(e,function(){a.open_node(e,s,i)},s))},after_open:function(t){this.__callback({obj:t})},close_node:function(e,s){e=this._get_node(e);var i=s||t?0:this._get_settings().core.animation,n=this;return e.length&&e.hasClass("jstree-open")?(i&&e.children("ul").attr("style","display:block !important"),e.removeClass("jstree-open").addClass("jstree-closed"),i?e.children("ul").stop(!0,!0).slideUp(i,function(){this.style.display="",n.after_close(e)}):n.after_close(e),this.__callback({obj:e}),void 0):!1},after_close:function(t){this.__callback({obj:t})},toggle_node:function(t){return t=this._get_node(t),t.hasClass("jstree-closed")?this.open_node(t):t.hasClass("jstree-open")?this.close_node(t):void 0},open_all:function(t,e,s){t=t?this._get_node(t):-1,t&&-1!==t||(t=this.get_container_ul()),s?t=t.find("li.jstree-closed"):(s=t,t=t.is(".jstree-closed")?t.find("li.jstree-closed").andSelf():t.find("li.jstree-closed"));var i=this;t.each(function(){var t=this;i._is_loaded(this)?i.open_node(this,!1,!e):i.open_node(this,function(){i.open_all(t,e,s)},!e)}),0===s.find("li.jstree-closed").length&&this.__callback({obj:s})},close_all:function(t,e){var s=this;t=t?this._get_node(t):this.get_container(),t&&-1!==t||(t=this.get_container_ul()),t.find("li.jstree-open").andSelf().each(function(){s.close_node(this,!e)}),this.__callback({obj:t})},clean_node:function(t){t=t&&-1!=t?i(t):this.get_container_ul(),t=t.is("li")?t.find("li").andSelf():t.find("li"),t.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed"),t.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:t})},get_rollback:function(){return this.__callback(),{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(t,e){this.get_container().empty().append(t),this.data=e,this.__callback()},load_node:function(t){this.__callback({obj:t})},_is_loaded:function(){return!0},create_node:function(t,e,s,n,a){t=this._get_node(t),e="undefined"==typeof e?"last":e;var r,o=i("<li />"),l=this._get_settings().core;if(-1!==t&&!t.length)return!1;if(!a&&!this._is_loaded(t))return this.load_node(t,function(){this.create_node(t,e,s,n,!0)}),!1;switch(this.__rollback(),"string"==typeof s&&(s={data:s}),s||(s={}),s.attr&&o.attr(s.attr),s.metadata&&o.data(s.metadata),s.state&&o.addClass("jstree-"+s.state),s.data||(s.data=this._get_string("new_node")),i.isArray(s.data)||(r=s.data,s.data=[],s.data.push(r)),i.each(s.data,function(t,e){r=i("<a />"),i.isFunction(e)&&(e=e.call(this,s)),"string"==typeof e?r.attr("href","#")[l.html_titles?"html":"text"](e):(e.attr||(e.attr={}),e.attr.href||(e.attr.href="#"),r.attr(e.attr)[l.html_titles?"html":"text"](e.title),e.language&&r.addClass(e.language)),r.prepend("<ins class='jstree-icon'>&#160;</ins>"),!e.icon&&s.icon&&(e.icon=s.icon),e.icon&&(-1===e.icon.indexOf("/")?r.children("ins").addClass(e.icon):r.children("ins").css("background","url('"+e.icon+"') center center no-repeat")),o.append(r)}),o.prepend("<ins class='jstree-icon'>&#160;</ins>"),-1===t&&(t=this.get_container(),"before"===e&&(e="first"),"after"===e&&(e="last")),e){case"before":t.before(o),r=this._get_parent(t);break;case"after":t.after(o),r=this._get_parent(t);break;case"inside":case"first":t.children("ul").length||t.append("<ul />"),t.children("ul").prepend(o),r=t;break;case"last":t.children("ul").length||t.append("<ul />"),t.children("ul").append(o),r=t;break;default:t.children("ul").length||t.append("<ul />"),e||(e=0),r=t.children("ul").children("li").eq(e),r.length?r.before(o):t.children("ul").append(o),r=t}return(-1===r||r.get(0)===this.get_container().get(0))&&(r=-1),this.clean_node(r),this.__callback({obj:o,parent:r}),n&&n.call(this,o),o},get_text:function(t){if(t=this._get_node(t),!t.length)return!1;var e=this._get_settings().core.html_titles;return t=t.children("a:eq(0)"),e?(t=t.clone(),t.children("INS").remove(),t.html()):(t=t.contents().filter(function(){return 3==this.nodeType})[0],t.nodeValue)},set_text:function(t,e){if(t=this._get_node(t),!t.length)return!1;if(t=t.children("a:eq(0)"),this._get_settings().core.html_titles){var s=t.children("INS").clone();return t.html(e).prepend(s),this.__callback({obj:t,name:e}),!0}return t=t.contents().filter(function(){return 3==this.nodeType})[0],this.__callback({obj:t,name:e}),t.nodeValue=e},rename_node:function(t,e){t=this._get_node(t),this.__rollback(),t&&t.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:t,name:e})},delete_node:function(t){if(t=this._get_node(t),!t.length)return!1;this.__rollback();var e=this._get_parent(t),s=i([]),n=this;return t.each(function(){s=s.add(n._get_prev(this))}),t=t.detach(),-1!==e&&0===e.find("> ul > li").length&&e.removeClass("jstree-open jstree-closed").addClass("jstree-leaf"),this.clean_node(e),this.__callback({obj:t,prev:s,parent:e}),t},prepare_move:function(t,e,s,n,a){var r={};if(r.ot=i.jstree._reference(t)||this,r.o=r.ot._get_node(t),r.r=-1===e?-1:this._get_node(e),r.p="undefined"==typeof s||s===!1?"last":s,!a&&o.o&&o.o[0]===r.o[0]&&o.r[0]===r.r[0]&&o.p===r.p)return this.__callback(o),n&&n.call(this,o),void 0;if(r.ot=i.jstree._reference(r.o)||this,r.rt=i.jstree._reference(r.r)||this,-1!==r.r&&r.r){if(!/^(before|after)$/.test(r.p)&&!this._is_loaded(r.r))return this.load_node(r.r,function(){this.prepare_move(t,e,s,n,!0)});switch(r.p){case"before":r.cp=r.r.index(),r.cr=r.rt._get_parent(r.r);break;case"after":r.cp=r.r.index()+1,r.cr=r.rt._get_parent(r.r);break;case"inside":case"first":r.cp=0,r.cr=r.r;break;case"last":r.cp=r.r.find(" > ul > li").length,r.cr=r.r;break;default:r.cp=r.p,r.cr=r.r}}else switch(r.cr=-1,r.p){case"first":case"before":case"inside":r.cp=0;break;case"after":case"last":r.cp=r.rt.get_container().find(" > ul > li").length;break;default:r.cp=r.p}r.np=-1==r.cr?r.rt.get_container():r.cr,r.op=r.ot._get_parent(r.o),r.cop=r.o.index(),-1===r.op&&(r.op=r.ot?r.ot.get_container():this.get_container()),!/^(before|after)$/.test(r.p)&&r.op&&r.np&&r.op[0]===r.np[0]&&r.o.index()<r.cp&&r.cp++,r.or=r.np.find(" > ul > li:nth-child("+(r.cp+1)+")"),o=r,this.__callback(o),n&&n.call(this,o)},check_move:function(){var t=o,e=!0,s=-1===t.r?this.get_container():t.r;return t&&t.o&&t.or[0]!==t.o[0]?t.op&&t.np&&t.op[0]===t.np[0]&&t.cp-1===t.o.index()?!1:(t.o.each(function(){return-1!==s.parentsUntil(".jstree","li").andSelf().index(this)?(e=!1,!1):void 0}),e):!1},move_node:function(t,e,s,n,a,r){if(!a)return this.prepare_move(t,e,s,function(t){this.move_node(t,!1,!1,n,!0,r)});if(n&&(o.cy=!0),!r&&!this.check_move())return!1;this.__rollback();var l=!1;n?(l=t.o.clone(!0),l.find("*[id]").andSelf().each(function(){this.id&&(this.id="copy_"+this.id)})):l=t.o,t.or.length?t.or.before(l):(t.np.children("ul").length||i("<ul />").appendTo(t.np),t.np.children("ul:eq(0)").append(l));try{t.ot.clean_node(t.op),t.rt.clean_node(t.np),t.op.find("> ul > li").length||t.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(d){}return n&&(o.cy=!0,o.oc=l),this.__callback(o),o},_get_move:function(){return o}}})}(jQuery),function(t){var e,s,i;t(function(){/msie/.test(navigator.userAgent.toLowerCase())?(s=t('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),i=t('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),e=s.width()-i.width(),s.add(i).remove()):(s=t("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),e=100-s.width(),s.parent().remove())}),t.jstree.plugin("ui",{__init:function(){this.data.ui.selected=t(),this.data.ui.last_selected=!1,this.data.ui.hovered=null,this.data.ui.to_select=this.get_settings().ui.initially_select,this.get_container().delegate("a","click.jstree",t.proxy(function(e){e.preventDefault(),e.currentTarget.blur(),t(e.currentTarget).hasClass("jstree-loading")||this.select_node(e.currentTarget,!0,e)},this)).delegate("a","mouseenter.jstree",t.proxy(function(e){t(e.currentTarget).hasClass("jstree-loading")||this.hover_node(e.target)},this)).delegate("a","mouseleave.jstree",t.proxy(function(e){t(e.currentTarget).hasClass("jstree-loading")||this.dehover_node(e.target)},this)).bind("reopen.jstree",t.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",t.proxy(function(){this.dehover_node(),this.save_selected()},this)).bind("set_rollback.jstree",t.proxy(function(){this.reselect()},this)).bind("close_node.jstree",t.proxy(function(e,s){var i=this._get_settings().ui,n=this._get_node(s.rslt.obj),a=n&&n.length?n.children("ul").find("a.jstree-clicked"):t(),r=this;i.selected_parent_close!==!1&&a.length&&a.each(function(){r.deselect_node(this),"select_parent"===i.selected_parent_close&&r.select_node(n)})},this)).bind("delete_node.jstree",t.proxy(function(t,e){var s=this._get_settings().ui.select_prev_on_delete,i=this._get_node(e.rslt.obj),n=i&&i.length?i.find("a.jstree-clicked"):[],a=this;n.each(function(){a.deselect_node(this)}),s&&n.length&&e.rslt.prev.each(function(){return this.parentNode?(a.select_node(this),!1):void 0})},this)).bind("move_node.jstree",t.proxy(function(t,e){e.rslt.cy&&e.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(e,s){if("undefined"==typeof e||null===e)return s?this.data.ui.selected:this.data.ui.last_selected;var i=t(e,this.get_container());return i.is(".jstree")||-1==e?-1:(i=i.closest("li",this.get_container()),i.length?i:!1)},_ui_notify:function(t,e){e.selected&&this.select_node(t,!1)},save_selected:function(){var t=this;this.data.ui.to_select=[],this.data.ui.selected.each(function(){this.id&&t.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}),this.__callback(this.data.ui.to_select)},reselect:function(){var e=this,s=this.data.ui.to_select;s=t.map(t.makeArray(s),function(t){return"#"+t.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),t.each(s,function(t,s){s&&"#"!==s&&e.select_node(s)}),this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode}),this.__callback()},refresh:function(){return this.save_selected(),this.__call_old()},hover_node:function(t){return t=this._get_node(t),t.length?(t.hasClass("jstree-hovered")||this.dehover_node(),this.data.ui.hovered=t.children("a").addClass("jstree-hovered").parent(),this._fix_scroll(t),this.__callback({obj:t}),void 0):!1},dehover_node:function(){var t,e=this.data.ui.hovered;return e&&e.length?(t=e.children("a").removeClass("jstree-hovered").parent(),this.data.ui.hovered[0]===t[0]&&(this.data.ui.hovered=null),this.__callback({obj:e}),void 0):!1},select_node:function(t,e,s){if(t=this._get_node(t),-1==t||!t||!t.length)return!1;var i=this._get_settings().ui,n="on"==i.select_multiple_modifier||i.select_multiple_modifier!==!1&&s&&s[i.select_multiple_modifier+"Key"],a=i.select_range_modifier!==!1&&s&&s[i.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==t[0]&&this.data.ui.last_selected.parent()[0]===t.parent()[0],r=this.is_selected(t),o=!0,l=this;if(e){if(i.disable_selecting_children&&n&&(t.parentsUntil(".jstree","li").children("a.jstree-clicked").length||t.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;switch(o=!1,!0){case a:this.data.ui.last_selected.addClass("jstree-last-selected"),t=t[t.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf(),-1==i.select_limit||t.length<i.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==l.data.ui.last_selected[0]&&l.deselect_node(this)}),r=!1,o=!0):o=!1;break;case r&&!n:this.deselect_all(),r=!1,o=!0;break;case!r&&!n:(-1==i.select_limit||i.select_limit>0)&&(this.deselect_all(),o=!0);break;case r&&n:this.deselect_node(t);break;case!r&&n:(-1==i.select_limit||this.data.ui.selected.length+1<=i.select_limit)&&(o=!0)}}o&&!r&&(a||(this.data.ui.last_selected=t),t.children("a").addClass("jstree-clicked"),i.selected_parent_open&&t.parents(".jstree-closed").each(function(){l.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(t),this._fix_scroll(t.eq(0)),this.__callback({obj:t,e:s}))},_fix_scroll:function(t){var s,i=this.get_container()[0];if(i.scrollHeight>i.offsetHeight){if(t=this._get_node(t),!t||-1===t||!t.length||!t.is(":visible"))return;s=t.offset().top-this.get_container().offset().top,0>s&&(i.scrollTop=i.scrollTop+s-1),s+this.data.core.li_height+(i.scrollWidth>i.offsetWidth?e:0)>i.offsetHeight&&(i.scrollTop=i.scrollTop+(s-i.offsetHeight+this.data.core.li_height+1+(i.scrollWidth>i.offsetWidth?e:0)))}},deselect_node:function(t){return t=this._get_node(t),t.length?(this.is_selected(t)&&(t.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(t),this.data.ui.last_selected.get(0)===t.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:t})),void 0):!1},toggle_select:function(t){return t=this._get_node(t),t.length?(this.is_selected(t)?this.deselect_node(t):this.select_node(t),void 0):!1},is_selected:function(t){return this.data.ui.selected.index(this._get_node(t))>=0},get_selected:function(e){return e?t(e).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(e){var s=e?t(e).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();s.children("a.jstree-clicked").removeClass("jstree-clicked"),this.data.ui.selected=t([]),this.data.ui.last_selected=!1,this.__callback({obj:s})}}}),t.jstree.defaults.plugins.push("ui")}(jQuery),function(t){t.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",t.proxy(function(t,e){if(this._get_settings().crrm.move.open_onmove){var s=this;e.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){s.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(){return!0}}},_fn:{_show_input:function(e,s){e=this._get_node(e);var i=this._get_settings().core.rtl,n=this._get_settings().crrm.input_width_limit,a=e.children("ins").width(),r=e.find("> a:visible > ins").width()*e.find("> a:visible > ins").length,o=this.get_text(e),l=t("<div />",{css:{position:"absolute",top:"-200px",left:i?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),d=e.css("position","relative").append(t("<input />",{value:o,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:i?"auto":a+r+4+"px",right:i?a+r+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:t.proxy(function(){var t=e.children(".jstree-rename-input"),i=t.val();""===i&&(i=o),l.remove(),t.remove(),this.set_text(e,o),this.rename_node(e,i),s.call(this,e,i,o),e.css("position","")},this),keyup:function(t){var e=t.keyCode||t.which;return 27==e?(this.value=o,this.blur(),void 0):13==e?(this.blur(),void 0):(d.width(Math.min(l.text("pW"+this.value).width(),n)),void 0)},keypress:function(t){var e=t.keyCode||t.which;return 13==e?!1:void 0}})).children(".jstree-rename-input");this.set_text(e,""),l.css({fontFamily:d.css("fontFamily")||"",fontSize:d.css("fontSize")||"",fontWeight:d.css("fontWeight")||"",fontStyle:d.css("fontStyle")||"",fontStretch:d.css("fontStretch")||"",fontVariant:d.css("fontVariant")||"",letterSpacing:d.css("letterSpacing")||"",wordSpacing:d.css("wordSpacing")||""}),d.width(Math.min(l.text("pW"+d[0].value).width(),n))[0].select()},rename:function(t){t=this._get_node(t),this.__rollback();var e=this.__callback;this._show_input(t,function(t,s,i){e.call(this,{obj:t,new_name:s,old_name:i})})},create:function(e,s,i,n,a){var r,o=this;return e=this._get_node(e),e||(e=-1),this.__rollback(),r=this.create_node(e,s,i,function(e){var s=this._get_parent(e),i=t(e).index();n&&n.call(this,e),s.length&&s.hasClass("jstree-closed")&&this.open_node(s,!1,!0),a?o.__callback({obj:e,name:this.get_text(e),parent:s,position:i}):this._show_input(e,function(t,e){o.__callback({obj:t,name:e,parent:s,position:i})})})},remove:function(t){t=this._get_node(t,!0);var e=this._get_parent(t),s=this._get_prev(t);this.__rollback(),t=this.delete_node(t),t!==!1&&this.__callback({obj:t,prev:s,parent:e})},check_move:function(){if(!this.__call_old())return!1;var t=this._get_settings().crrm.move;return t.check_move.call(this,this._get_move())?!0:!1},move_node:function(t,e,s,i,n,a){var r=this._get_settings().crrm.move;return n?((r.always_copy===!0||"multitree"===r.always_copy&&t.rt.get_index()!==t.ot.get_index())&&(i=!0),this.__call_old(!0,t,e,s,i,!0,a),void 0):("undefined"==typeof s&&(s=r.default_position),"inside"!==s||r.default_position.match(/^(before|after)$/)||(s=r.default_position),this.__call_old(!0,t,e,s,i,!1,a))},cut:function(t){return t=this._get_node(t,!0),t&&t.length?(this.data.crrm.cp_nodes=!1,this.data.crrm.ct_nodes=t,this.__callback({obj:t}),void 0):!1},copy:function(t){return t=this._get_node(t,!0),t&&t.length?(this.data.crrm.ct_nodes=!1,this.data.crrm.cp_nodes=t,this.__callback({obj:t}),void 0):!1},paste:function(t){if(t=this._get_node(t),!t||!t.length)return!1;var e=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;return this.data.crrm.ct_nodes||this.data.crrm.cp_nodes?(this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,t),this.data.crrm.ct_nodes=!1),this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,t,!1,!0),this.__callback({obj:t,nodes:e}),void 0):!1}}})}(jQuery),function(t){var e=[];t.jstree._themes="/assets/aim/stylesheets/themes/",t.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",t.proxy(function(){var t=this._get_settings().themes;
this.data.themes.dots=t.dots,this.data.themes.icons=t.icons,this.set_theme(t.theme,t.url)},this)).bind("loaded.jstree",t.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(s,i){return s?(i||(i=t.jstree._themes+s+"/style.css"),-1==t.inArray(i,e)&&(t.vakata.css.add_sheet({url:i}),e.push(i)),this.data.themes.theme!=s&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=s),this.get_container().addClass("jstree-"+s),this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons(),this.__callback(),void 0):!1},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0,this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1,this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0,this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1,this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}}),t(function(){t.jstree._themes===!1&&t("script").each(function(){return this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/)?(t.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1):void 0}),t.jstree._themes===!1&&(t.jstree._themes="themes/")}),t.jstree.defaults.plugins.push("themes")}(jQuery),function(t){function e(e,s){var i,n=t.jstree._focused();return n&&n.data&&n.data.hotkeys&&n.data.hotkeys.enabled&&(i=n._get_settings().hotkeys[e])?i.call(n,s):void 0}var s=[];t.jstree.plugin("hotkeys",{__init:function(){if("undefined"==typeof t.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";t.each(this._get_settings().hotkeys,function(i,n){n!==!1&&-1==t.inArray(i,s)&&(t(document).bind("keydown",i,function(t){return e(i,t)}),s.push(i))}),this.get_container().bind("lock.jstree",t.proxy(function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",t.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this)),this.enable_hotkeys()},defaults:{up:function(){var t=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(t)),!1},"ctrl+up":function(){var t=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(t)),!1},"shift+up":function(){var t=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(t)),!1},down:function(){var t=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(t)),!1},"ctrl+down":function(){var t=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(t)),!1},"shift+down":function(){var t=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(t)),!1},left:function(){var t=this.data.ui.hovered||this.data.ui.last_selected;return t&&(t.hasClass("jstree-open")?this.close_node(t):this.hover_node(this._get_prev(t))),!1},"ctrl+left":function(){var t=this.data.ui.hovered||this.data.ui.last_selected;return t&&(t.hasClass("jstree-open")?this.close_node(t):this.hover_node(this._get_prev(t))),!1},"shift+left":function(){var t=this.data.ui.hovered||this.data.ui.last_selected;return t&&(t.hasClass("jstree-open")?this.close_node(t):this.hover_node(this._get_prev(t))),!1},right:function(){var t=this.data.ui.hovered||this.data.ui.last_selected;return t&&t.length&&(t.hasClass("jstree-closed")?this.open_node(t):this.hover_node(this._get_next(t))),!1},"ctrl+right":function(){var t=this.data.ui.hovered||this.data.ui.last_selected;return t&&t.length&&(t.hasClass("jstree-closed")?this.open_node(t):this.hover_node(this._get_next(t))),!1},"shift+right":function(){var t=this.data.ui.hovered||this.data.ui.last_selected;return t&&t.length&&(t.hasClass("jstree-closed")?this.open_node(t):this.hover_node(this._get_next(t))),!1},space:function(){return this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click(),!1},"ctrl+space":function(t){return t.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(t),!1},"shift+space":function(t){return t.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(t),!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=!1}}})}(jQuery),function(t){t.jstree.plugin("json_data",{__init:function(){var t=this._get_settings().json_data;t.progressive_unload&&this.get_container().bind("after_close.jstree",function(t,e){e.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(t,e,s){var i=this;this.load_node_json(t,function(){i.__callback({obj:i._get_node(t)}),e.call(this)},s)},_is_loaded:function(e){var s=this._get_settings().json_data;return e=this._get_node(e),-1==e||!e||!s.ajax&&!s.progressive_render&&!t.isFunction(s.data)||e.is(".jstree-open, .jstree-leaf")||e.children("ul").children("li").length>0},refresh:function(e){e=this._get_node(e);var s=this._get_settings().json_data;return e&&-1!==e&&s.progressive_unload&&(t.isFunction(s.data)||s.ajax)&&e.removeData("jstree_children"),this.__call_old()},load_node_json:function(e,s,i){var n,a=this.get_settings().json_data,r=function(){},o=function(){};if(e=this._get_node(e),e&&-1!==e&&(a.progressive_render||a.progressive_unload)&&!e.is(".jstree-open, .jstree-leaf")&&0===e.children("ul").children("li").length&&e.data("jstree_children"))return n=this._parse_json(e.data("jstree_children"),e),n&&(e.append(n),a.progressive_unload||e.removeData("jstree_children")),this.clean_node(e),s&&s.call(this),void 0;if(e&&-1!==e){if(e.data("jstree_is_loading"))return;e.data("jstree_is_loading",!0)}switch(!0){case!a.data&&!a.ajax:throw"Neither data nor ajax settings supplied.";case t.isFunction(a.data):a.data.call(this,e,t.proxy(function(t){t=this._parse_json(t,e),t?(-1!==e&&e?(e.append(t).children("a.jstree-loading").removeClass("jstree-loading"),e.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(t.children()),this.clean_node(e),s&&s.call(this)):(-1!==e&&e?(e.children("a.jstree-loading").removeClass("jstree-loading"),e.removeData("jstree_is_loading"),a.correct_state&&this.correct_state(e)):a.correct_state&&this.get_container().children("ul").empty(),i&&i.call(this))},this));break;case!!a.data&&!a.ajax||!!a.data&&!!a.ajax&&(!e||-1===e):e&&-1!=e||(n=this._parse_json(a.data,e),n?(this.get_container().children("ul").empty().append(n.children()),this.clean_node()):a.correct_state&&this.get_container().children("ul").empty()),s&&s.call(this);break;case!a.data&&!!a.ajax||!!a.data&&!!a.ajax&&e&&-1!==e:r=function(t,s,n){var r=this.get_settings().json_data.ajax.error;r&&r.call(this,t,s,n),-1!=e&&e.length?(e.children("a.jstree-loading").removeClass("jstree-loading"),e.removeData("jstree_is_loading"),"success"===s&&a.correct_state&&this.correct_state(e)):"success"===s&&a.correct_state&&this.get_container().children("ul").empty(),i&&i.call(this)},o=function(i,n,o){var l=this.get_settings().json_data.ajax.success;return l&&(i=l.call(this,i,n,o)||i),""===i||i&&i.toString&&""===i.toString().replace(/^[\s\n]+$/,"")||!t.isArray(i)&&!t.isPlainObject(i)?r.call(this,o,n,""):(i=this._parse_json(i,e),i?(-1!==e&&e?(e.append(i).children("a.jstree-loading").removeClass("jstree-loading"),e.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(i.children()),this.clean_node(e),s&&s.call(this)):-1!==e&&e?(e.children("a.jstree-loading").removeClass("jstree-loading"),e.removeData("jstree_is_loading"),a.correct_state&&(this.correct_state(e),s&&s.call(this))):a.correct_state&&(this.get_container().children("ul").empty(),s&&s.call(this)),void 0)},a.ajax.context=this,a.ajax.error=r,a.ajax.success=o,a.ajax.dataType||(a.ajax.dataType="json"),t.isFunction(a.ajax.url)&&(a.ajax.url=a.ajax.url.call(this,e)),t.isFunction(a.ajax.data)&&(a.ajax.data=a.ajax.data.call(this,e)),t.ajax(a.ajax)}},_parse_json:function(e,s,i){var n,a,r,o,l,d=!1,c=this._get_settings(),h=c.json_data,u=c.core.html_titles;if(!e)return d;if(h.progressive_unload&&s&&-1!==s&&s.data("jstree_children",d),t.isArray(e)){if(d=t(),!e.length)return!1;for(a=0,r=e.length;r>a;a++)n=this._parse_json(e[a],s,!0),n.length&&(d=d.add(n))}else{if("string"==typeof e&&(e={data:e}),!e.data&&""!==e.data)return d;d=t("<li />"),e.attr&&d.attr(e.attr),e.metadata&&d.data(e.metadata),e.state&&d.addClass("jstree-"+e.state),t.isArray(e.data)||(n=e.data,e.data=[],e.data.push(n)),t.each(e.data,function(s,i){n=t("<a />"),t.isFunction(i)&&(i=i.call(this,e)),"string"==typeof i?n.attr("href","#")[u?"html":"text"](i):(i.attr||(i.attr={}),i.attr.href||(i.attr.href="#"),n.attr(i.attr)[u?"html":"text"](i.title),i.language&&n.addClass(i.language)),n.prepend("<ins class='jstree-icon'>&#160;</ins>"),!i.icon&&e.icon&&(i.icon=e.icon),i.icon&&(-1===i.icon.indexOf("/")?n.children("ins").addClass(i.icon):n.children("ins").css("background","url('"+i.icon+"') center center no-repeat")),d.append(n)}),d.prepend("<ins class='jstree-icon'>&#160;</ins>"),e.children&&(h.progressive_render&&"open"!==e.state?d.addClass("jstree-closed").data("jstree_children",e.children):(h.progressive_unload&&d.data("jstree_children",e.children),t.isArray(e.children)&&e.children.length&&(n=this._parse_json(e.children,s,!0),n.length&&(l=t("<ul />"),l.append(n),d.append(l)))))}return i||(o=t("<ul />"),o.append(d),d=o),d},get_json:function(e,s,i,n){var a,r,o,l,d,c,h=[],u=this._get_settings(),_=this;return e=this._get_node(e),e&&-1!==e||(e=this.get_container().find("> ul > li")),s=t.isArray(s)?s:["id","class"],!n&&this.data.types&&s.push(u.types.type_attr),i=t.isArray(i)?i:[],e.each(function(){o=t(this),a={data:[]},s.length&&(a.attr={}),t.each(s,function(t,e){r=o.attr(e),r&&r.length&&r.replace(/jstree[^ ]*/gi,"").length&&(a.attr[e]=(" "+r).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))}),o.hasClass("jstree-open")&&(a.state="open"),o.hasClass("jstree-closed")&&(a.state="closed"),o.data()&&(a.metadata=o.data()),l=o.children("a"),l.each(function(){d=t(this),i.length||-1!==t.inArray("languages",u.plugins)||d.children("ins").get(0).style.backgroundImage.length||d.children("ins").get(0).className&&d.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").length?(c=!1,-1!==t.inArray("languages",u.plugins)&&t.isArray(u.languages)&&u.languages.length&&t.each(u.languages,function(t,e){return d.hasClass(e)?(c=e,!1):void 0}),r={attr:{},title:_.get_text(d,c)},t.each(i,function(t,e){r.attr[e]=(" "+(d.attr(e)||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")}),-1!==t.inArray("languages",u.plugins)&&t.isArray(u.languages)&&u.languages.length&&t.each(u.languages,function(t,e){return d.hasClass(e)?(r.language=e,!0):void 0}),d.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(r.icon=d.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")),d.children("ins").get(0).style.backgroundImage.length&&(r.icon=d.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):r=_.get_text(d),l.length>1?a.data.push(r):a.data=r}),o=o.find("> ul > li"),o.length&&(a.children=_.get_json(o,s,i,!0)),h.push(a)}),h}}})}(jQuery),function(t){t.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(e){var s=this._get_settings().languages,i=!1,n=".jstree-"+this.get_index()+" a";if(!t.isArray(s)||0===s.length)return!1;if(-1==t.inArray(e,s)){if(!s[e])return!1;e=s[e]}return e==this.data.languages.current_language?!0:(i=t.vakata.css.get_css(n+"."+this.data.languages.current_language,!1,this.data.languages.language_css),i!==!1&&(i.style.display="none"),i=t.vakata.css.get_css(n+"."+e,!1,this.data.languages.language_css),i!==!1&&(i.style.display=""),this.data.languages.current_language=e,this.__callback(e),!0)},get_lang:function(){return this.data.languages.current_language},_get_string:function(e,s){var i=this._get_settings().languages,n=this._get_settings().core.strings;return t.isArray(i)&&i.length&&(s=s&&-1!=t.inArray(s,i)?s:this.data.languages.current_language),n[s]&&n[s][e]?n[s][e]:n[e]?n[e]:e},get_text:function(e,s){if(e=this._get_node(e)||this.data.ui.last_selected,!e.size())return!1;var i=this._get_settings().languages,n=this._get_settings().core.html_titles;return t.isArray(i)&&i.length?(s=s&&-1!=t.inArray(s,i)?s:this.data.languages.current_language,e=e.children("a."+s)):e=e.children("a:eq(0)"),n?(e=e.clone(),e.children("INS").remove(),e.html()):(e=e.contents().filter(function(){return 3==this.nodeType})[0],e.nodeValue)},set_text:function(e,s,i){if(e=this._get_node(e)||this.data.ui.last_selected,!e.size())return!1;var n,a=this._get_settings().languages,r=this._get_settings().core.html_titles;return t.isArray(a)&&a.length?(i=i&&-1!=t.inArray(i,a)?i:this.data.languages.current_language,e=e.children("a."+i)):e=e.children("a:eq(0)"),r?(n=e.children("INS").clone(),e.html(s).prepend(n),this.__callback({obj:e,name:s,lang:i}),!0):(e=e.contents().filter(function(){return 3==this.nodeType})[0],this.__callback({obj:e,name:s,lang:i}),e.nodeValue=s)},_load_css:function(){var e,s=this._get_settings().languages,i="/* languages css */",n=".jstree-"+this.get_index()+" a";if(t.isArray(s)&&s.length){for(this.data.languages.current_language=s[0],e=0;e<s.length;e++)i+=n+"."+s[e]+" {",s[e]!=this.data.languages.current_language&&(i+=" display:none; "),i+=" } ";this.data.languages.language_css=t.vakata.css.add_sheet({str:i,title:"jstree-languages"})}},create_node:function(e,s,i,n){var a=this.__call_old(!0,e,s,i,function(e){var s,i=this._get_settings().languages,a=e.children("a");if(t.isArray(i)&&i.length){for(s=0;s<i.length;s++)a.is("."+i[s])||e.append(a.eq(0).clone().removeClass(i.join(" ")).addClass(i[s]));a.not("."+i.join(", .")).remove()}n&&n.call(this,e)});return a}}})}(jQuery),function(t){t.jstree.plugin("cookies",{__init:function(){if("undefined"==typeof t.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";var e,s=this._get_settings().cookies;s.save_loaded&&(e=t.cookie(s.save_loaded),e&&e.length&&(this.data.core.to_load=e.split(","))),s.save_opened&&(e=t.cookie(s.save_opened),e&&e.length&&(this.data.core.to_open=e.split(","))),s.save_selected&&(e=t.cookie(s.save_selected),e&&e.length&&this.data.ui&&(this.data.ui.to_select=e.split(","))),this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",t.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",t.proxy(function(t){this._get_settings().cookies.auto_save&&this.save_cookie((t.handleObj.namespace+t.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(e){if(!this.data.core.refreshing){var s=this._get_settings().cookies;if(!e)return s.save_loaded&&(this.save_loaded(),t.cookie(s.save_loaded,this.data.core.to_load.join(","),s.cookie_options)),s.save_opened&&(this.save_opened(),t.cookie(s.save_opened,this.data.core.to_open.join(","),s.cookie_options)),s.save_selected&&this.data.ui&&(this.save_selected(),t.cookie(s.save_selected,this.data.ui.to_select.join(","),s.cookie_options)),void 0;switch(e){case"open_node":case"close_node":s.save_opened&&(this.save_opened(),t.cookie(s.save_opened,this.data.core.to_open.join(","),s.cookie_options)),s.save_loaded&&(this.save_loaded(),t.cookie(s.save_loaded,this.data.core.to_load.join(","),s.cookie_options));break;case"select_node":case"deselect_node":s.save_selected&&this.data.ui&&(this.save_selected(),t.cookie(s.save_selected,this.data.ui.to_select.join(","),s.cookie_options))}}}}})}(jQuery),function(t){t.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",t.proxy(function(t,e){var s=this._get_node(e.rslt.obj);s=-1===s?this.get_container().children("ul"):s.children("ul"),this.sort(s)},this)).bind("rename_node.jstree create_node.jstree create.jstree",t.proxy(function(t,e){this.sort(e.rslt.obj.parent())},this)).bind("move_node.jstree",t.proxy(function(t,e){var s=-1==e.rslt.np?this.get_container():e.rslt.np;this.sort(s.children("ul"))},this))},defaults:function(t,e){return this.get_text(t)>this.get_text(e)?1:-1},_fn:{sort:function(e){var s=this._get_settings().sort,i=this;e.append(t.makeArray(e.children("li")).sort(t.proxy(s,i))),e.find("> li > ul").each(function(){i.sort(t(this))}),this.clean_node(e)}}})}(jQuery),function(t){var e=!1,s=!1,i=!1,n=!1,a=!1,r=!1,o=!1,l=!1,d=!1;t.vakata.dnd={is_down:!1,is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(e,s,i){t.vakata.dnd.is_drag&&t.vakata.drag_stop({});try{e.currentTarget.unselectable="on",e.currentTarget.onselectstart=function(){return!1},e.currentTarget.style&&(e.currentTarget.style.MozUserSelect="none")}catch(n){}return t.vakata.dnd.init_x=e.pageX,t.vakata.dnd.init_y=e.pageY,t.vakata.dnd.user_data=s,t.vakata.dnd.is_down=!0,t.vakata.dnd.helper=t("<div id='vakata-dragged' />").html(i),t(document).bind("mousemove",t.vakata.dnd.drag),t(document).bind("mouseup",t.vakata.dnd.drag_stop),!1},drag:function(e){if(t.vakata.dnd.is_down){if(!t.vakata.dnd.is_drag){if(!(Math.abs(e.pageX-t.vakata.dnd.init_x)>5||Math.abs(e.pageY-t.vakata.dnd.init_y)>5))return;t.vakata.dnd.helper.appendTo("body"),t.vakata.dnd.is_drag=!0,t(document).triggerHandler("drag_start.vakata",{event:e,data:t.vakata.dnd.user_data})}if("mousemove"===e.type){var s=t(document),i=s.scrollTop(),n=s.scrollLeft();e.pageY-i<20?(r&&"down"===o&&(clearInterval(r),r=!1),r||(o="up",r=setInterval(function(){t(document).scrollTop(t(document).scrollTop()-t.vakata.dnd.scroll_spd)},150))):r&&"up"===o&&(clearInterval(r),r=!1),t(window).height()-(e.pageY-i)<20?(r&&"up"===o&&(clearInterval(r),r=!1),r||(o="down",r=setInterval(function(){t(document).scrollTop(t(document).scrollTop()+t.vakata.dnd.scroll_spd)},150))):r&&"down"===o&&(clearInterval(r),r=!1),e.pageX-n<20?(a&&"right"===l&&(clearInterval(a),a=!1),a||(l="left",a=setInterval(function(){t(document).scrollLeft(t(document).scrollLeft()-t.vakata.dnd.scroll_spd)},150))):a&&"left"===l&&(clearInterval(a),a=!1),t(window).width()-(e.pageX-n)<20?(a&&"left"===l&&(clearInterval(a),a=!1),a||(l="right",a=setInterval(function(){t(document).scrollLeft(t(document).scrollLeft()+t.vakata.dnd.scroll_spd)},150))):a&&"right"===l&&(clearInterval(a),a=!1)}t.vakata.dnd.helper.css({left:e.pageX+t.vakata.dnd.helper_left+"px",top:e.pageY+t.vakata.dnd.helper_top+"px"}),t(document).triggerHandler("drag.vakata",{event:e,data:t.vakata.dnd.user_data})}},drag_stop:function(e){a&&clearInterval(a),r&&clearInterval(r),t(document).unbind("mousemove",t.vakata.dnd.drag),t(document).unbind("mouseup",t.vakata.dnd.drag_stop),t(document).triggerHandler("drag_stop.vakata",{event:e,data:t.vakata.dnd.user_data}),t.vakata.dnd.helper.remove(),t.vakata.dnd.init_x=0,t.vakata.dnd.init_y=0,t.vakata.dnd.user_data={},t.vakata.dnd.is_down=!1,t.vakata.dnd.is_drag=!1}},t(function(){var e="#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ";t.vakata.css.add_sheet({str:e,title:"vakata"})}),t.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1},this.get_container().bind("mouseenter.jstree",t.proxy(function(s){if(t.vakata.dnd.is_drag&&t.vakata.dnd.user_data.jstree&&(this.data.themes&&(i.attr("class","jstree-"+this.data.themes.theme),n&&n.attr("class","jstree-"+this.data.themes.theme),t.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),s.currentTarget===s.target&&t.vakata.dnd.user_data.obj&&t(t.vakata.dnd.user_data.obj).length&&t(t.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==s.target)){var a,r=t.jstree._reference(s.target);r.data.dnd.foreign?(a=r._get_settings().dnd.drag_check.call(this,{o:e,r:r.get_container(),is_root:!0}),(a===!0||a.inside===!0||a.before===!0||a.after===!0)&&t.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(r.prepare_move(e,r.get_container(),"last"),r.check_move()&&t.vakata.dnd.helper.children("ins").attr("class","jstree-ok"))}},this)).bind("mouseup.jstree",t.proxy(function(s){if(t.vakata.dnd.is_drag&&t.vakata.dnd.user_data.jstree&&s.currentTarget===s.target&&t.vakata.dnd.user_data.obj&&t(t.vakata.dnd.user_data.obj).length&&t(t.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==s.target){var i,n=t.jstree._reference(s.currentTarget);n.data.dnd.foreign?(i=n._get_settings().dnd.drag_check.call(this,{o:e,r:n.get_container(),is_root:!0}),(i===!0||i.inside===!0||i.before===!0||i.after===!0)&&n._get_settings().dnd.drag_finish.call(this,{o:e,r:n.get_container(),is_root:!0})):n.move_node(e,n.get_container(),"last",s[n._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",t.proxy(function(e){return e.relatedTarget&&e.relatedTarget.id&&"jstree-marker-line"===e.relatedTarget.id?!1:(t.vakata.dnd.is_drag&&t.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),t.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&t.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")),void 0)},this)).bind("mousemove.jstree",t.proxy(function(e){if(t.vakata.dnd.is_drag&&t.vakata.dnd.user_data.jstree){var s=this.get_container()[0];e.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(t.proxy(function(){this.scrollLeft+=t.vakata.dnd.scroll_spd},s),100)):e.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(t.proxy(function(){this.scrollLeft-=t.vakata.dnd.scroll_spd},s),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1),e.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(t.proxy(function(){this.scrollTop+=t.vakata.dnd.scroll_spd},s),100)):e.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(t.proxy(function(){this.scrollTop-=t.vakata.dnd.scroll_spd},s),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",t.proxy(function(){t.vakata.dnd.is_drag&&t.vakata.dnd.user_data.jstree&&i&&n&&(i.hide(),n.hide())},this)).delegate("a","mousedown.jstree",t.proxy(function(t){return 1===t.which?(this.start_drag(t.currentTarget,t),!1):void 0},this)).delegate("a","mouseenter.jstree",t.proxy(function(e){t.vakata.dnd.is_drag&&t.vakata.dnd.user_data.jstree&&this.dnd_enter(e.currentTarget)},this)).delegate("a","mousemove.jstree",t.proxy(function(e){t.vakata.dnd.is_drag&&t.vakata.dnd.user_data.jstree&&(s&&s.length&&s.children("a")[0]===e.currentTarget||this.dnd_enter(e.currentTarget),"undefined"==typeof this.data.dnd.off.top&&(this.data.dnd.off=t(e.target).offset()),this.data.dnd.w=(e.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,this.data.dnd.w<0&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",t.proxy(function(e){if(t.vakata.dnd.is_drag&&t.vakata.dnd.user_data.jstree){if(e.relatedTarget&&e.relatedTarget.id&&"jstree-marker-line"===e.relatedTarget.id)return!1;i&&i.hide(),n&&n.hide(),this.data.dnd.mto=setTimeout(function(t){return function(){t.dnd_leave(e)}}(this),0)}},this)).delegate("a","mouseup.jstree",t.proxy(function(e){t.vakata.dnd.is_drag&&t.vakata.dnd.user_data.jstree&&this.dnd_finish(e)},this)),t(document).bind("drag_stop.vakata",t.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,this.data.dnd.off=!1,this.data.dnd.prepared=!1,this.data.dnd.w=!1,this.data.dnd.to1=!1,this.data.dnd.to2=!1,this.data.dnd.i1=!1,this.data.dnd.i2=!1,this.data.dnd.active=!1,this.data.dnd.foreign=!1,i&&i.css({top:"-2000px"}),n&&n.css({top:"-2000px"})},this)).bind("drag_start.vakata",t.proxy(function(e,s){if(s.data.jstree){var i=t(s.event.target);i.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(i)}},this));var a=this._get_settings().dnd;a.drag_target&&t(document).delegate(a.drag_target,"mousedown.jstree-"+this.get_index(),t.proxy(function(s){e=s.target,t.vakata.dnd.drag_start(s,{jstree:!0,obj:s.target},"<ins class='jstree-icon'></ins>"+t(s.target).text()),this.data.themes&&(i&&i.attr("class","jstree-"+this.data.themes.theme),n&&n.attr("class","jstree-"+this.data.themes.theme),t.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),t.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var a=this.get_container();this.data.dnd.cof=a.offset(),this.data.dnd.cw=parseInt(a.width(),10),this.data.dnd.ch=parseInt(a.height(),10),this.data.dnd.foreign=!0,s.preventDefault()},this)),a.drop_target&&t(document).delegate(a.drop_target,"mouseenter.jstree-"+this.get_index(),t.proxy(function(s){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:e,r:t(s.target),e:s})&&t.vakata.dnd.helper.children("ins").attr("class","jstree-ok")},this)).delegate(a.drop_target,"mouseleave.jstree-"+this.get_index(),t.proxy(function(){this.data.dnd.active&&t.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(a.drop_target,"mouseup.jstree-"+this.get_index(),t.proxy(function(s){this.data.dnd.active&&t.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:e,r:t(s.target),e:s})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(){return!0},drop_finish:t.noop,drag_target:".jstree-draggable",drag_finish:t.noop,drag_check:function(){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(s&&s.length){if(this.data.dnd.off=s.offset(),this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+s.width()),this.data.dnd.foreign){var t=this._get_settings().dnd.drag_check.call(this,{o:e,r:s});return this.data.dnd.after=t.after,this.data.dnd.before=t.before,this.data.dnd.inside=t.inside,this.data.dnd.prepared=!0,this.dnd_show()}return this.prepare_move(e,s,"before"),this.data.dnd.before=this.check_move(),this.prepare_move(e,s,"after"),this.data.dnd.after=this.check_move(),this._is_loaded(s)?(this.prepare_move(e,s,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1,this.data.dnd.prepared=!0,this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var e,s=["before","inside","after"],a=!1,r=this._get_settings().core.rtl;switch(s=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"],t.each(s,t.proxy(function(e,s){return this.data.dnd[s]?(t.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),a=s,!1):void 0},this)),a===!1&&t.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),e=r?this.data.dnd.off.right-18:this.data.dnd.off.left+10,a){case"before":i.css({left:e+"px",top:this.data.dnd.off.top-6+"px"}).show(),n&&n.css({left:e+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case"after":i.css({left:e+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show(),n&&n.css({left:e+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case"inside":i.css({left:e+(r?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show(),n&&n.hide();break;default:i.hide(),n&&n.hide()}return d=a,a}},dnd_open:function(){this.data.dnd.to2=!1,this.open_node(s,t.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(t){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:e,r:s,p:d}):(this.dnd_prepare(),this.move_node(e,s,d,t[this._get_settings().dnd.copy_modifier+"Key"])),e=!1,s=!1,i.hide(),n&&n.hide()},dnd_enter:function(e){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=!1);var i=this._get_settings().dnd;this.data.dnd.prepared=!1,s=this._get_node(e),i.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(t.proxy(this.dnd_prepare,this),i.check_timeout)):this.dnd_prepare(),i.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),s&&s.length&&s.hasClass("jstree-closed")&&(this.data.dnd.to2=setTimeout(t.proxy(this.dnd_open,this),i.open_timeout))):s&&s.length&&s.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(e){this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,t.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),i.hide(),n&&n.hide(),s&&s[0]===e.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(s,a){e=this._get_node(s),this.data.ui&&this.is_selected(e)&&(e=this._get_node(null,!0));var r=e.length>1?this._get_string("multiple_selection"):this.get_text(e),o=this.get_container();this._get_settings().core.html_titles||(r=r.replace(/</gi,"&lt;").replace(/>/gi,"&gt;")),t.vakata.dnd.drag_start(a,{jstree:!0,obj:e},"<ins class='jstree-icon'></ins>"+r),this.data.themes&&(i&&i.attr("class","jstree-"+this.data.themes.theme),n&&n.attr("class","jstree-"+this.data.themes.theme),t.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),this.data.dnd.cof=o.offset(),this.data.dnd.cw=parseInt(o.width(),10),this.data.dnd.ch=parseInt(o.height(),10),this.data.dnd.active=!0}}}),t(function(){var e="#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }";t.vakata.css.add_sheet({str:e,title:"jstree"}),i=t("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(t){return i.hide(),n.hide(),t.preventDefault(),t.stopImmediatePropagation(),!1}).appendTo("body"),n=t("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(t){return s&&s.length?(s.children("a").trigger(t),t.preventDefault(),t.stopImmediatePropagation(),!1):void 0}).bind("mouseleave",function(e){var a=t(e.relatedTarget);return(a.is(".jstree")||0===a.closest(".jstree").length)&&s&&s.length?(s.children("a").trigger(e),i.hide(),n.hide(),e.preventDefault(),e.stopImmediatePropagation(),!1):void 0}).appendTo("body"),t(document).bind("drag_start.vakata",function(t,e){e.data.jstree&&(i.show(),n&&n.show())
}),t(document).bind("drag_stop.vakata",function(t,e){e.data.jstree&&(i.hide(),n&&n.hide())})})}(jQuery),function(t){t.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui,this.data.ui&&this.data.checkbox.noui&&(this.select_node=this.deselect_node=this.deselect_all=t.noop,this.get_selected=this.get_checked),this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",t.proxy(function(t,e){this._prepare_checkboxes(e.rslt.obj)},this)).bind("loaded.jstree",t.proxy(function(){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",t.proxy(function(t){return t.preventDefault(),this._get_node(t.target).hasClass("jstree-checked")?this.uncheck_node(t.target):this.check_node(t.target),this.data.ui&&this.data.checkbox.noui?(this.save_selected(),this.data.cookies&&this.save_cookie("select_node"),void 0):(t.stopImmediatePropagation(),!1)},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(t){return["check_"+(t[0].id||Math.ceil(1e4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},_fn:{_checkbox_notify:function(t,e){e.checked&&this.check_node(t,!1)},_prepare_checkboxes:function(e){if(e=e&&-1!=e?this._get_node(e):this.get_container().find("> ul > li"),e!==!1){var s,i,n=this,a=this._get_settings().checkbox.two_state,r=this._get_settings().checkbox.real_checkboxes,o=this._get_settings().checkbox.real_checkboxes_names;e.each(function(){i=t(this),s=i.is("li")&&(i.hasClass("jstree-checked")||r&&i.children(":checked").length)?"jstree-checked":"jstree-unchecked",i.find("li").andSelf().each(function(){var e,i=t(this);i.children("a"+(n.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(a?"jstree-unchecked":s),r&&(i.children(":checkbox").length?i.children(":checkbox").addClass("jstree-real-checkbox"):(e=o.call(n,i),i.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+e[0]+"' name='"+e[0]+"' value='"+e[1]+"' />"))),a?(i.hasClass("jstree-checked")||i.children(":checked").length)&&i.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===s||i.hasClass("jstree-checked")||i.children(":checked").length)&&i.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})}),a||e.find(".jstree-checked").parent().parent().each(function(){n._repair_state(this)})}},change_state:function(e,s){e=this._get_node(e);var i=!1,n=this._get_settings().checkbox.real_checkboxes;if(!e||-1===e)return!1;if(s=s===!1||s===!0?s:e.hasClass("jstree-checked"),this._get_settings().checkbox.two_state)s?(e.removeClass("jstree-checked").addClass("jstree-unchecked"),n&&e.children(":checkbox").prop("checked",!1)):(e.removeClass("jstree-unchecked").addClass("jstree-checked"),n&&e.children(":checkbox").prop("checked",!0));else{if(s){if(i=e.find("li").andSelf(),!i.filter(".jstree-checked, .jstree-undetermined").length)return!1;i.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),n&&i.children(":checkbox").prop("checked",!1)}else{if(i=e.find("li").andSelf(),!i.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;i.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),n&&i.children(":checkbox").prop("checked",!0),this.data.ui&&(this.data.ui.last_selected=e),this.data.checkbox.last_selected=e}e.parentsUntil(".jstree","li").each(function(){var e=t(this);if(s){if(e.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return e.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),n&&e.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;e.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),n&&e.children(":checkbox").prop("checked",!1)}else{if(e.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return e.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),n&&e.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;e.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),n&&e.children(":checkbox").prop("checked",!0)}})}return this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked()),this.__callback(e),!0},check_node:function(t){if(this.change_state(t,!1)){if(t=this._get_node(t),this._get_settings().checkbox.checked_parent_open){var e=this;t.parents(".jstree-closed").each(function(){e.open_node(this,!1,!0)})}this.__callback({obj:t})}},uncheck_node:function(t){this.change_state(t,!0)&&this.__callback({obj:this._get_node(t)})},check_all:function(){var t=this,e=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");e.each(function(){t.change_state(this,!1)}),this.__callback()},uncheck_all:function(){var t=this,e=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");e.each(function(){t.change_state(this,!0)}),this.__callback()},is_checked:function(t){return t=this._get_node(t),t.length?t.is(".jstree-checked"):!1},get_checked:function(t,e){return t=t&&-1!==t?this._get_node(t):this.get_container(),e||this._get_settings().checkbox.two_state?t.find(".jstree-checked"):t.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(t,e){return t=t&&-1!==t?this._get_node(t):this.get_container(),e||this._get_settings().checkbox.two_state?t.find(".jstree-unchecked"):t.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(t){if(t=this._get_node(t),t.length){if(this._get_settings().checkbox.two_state)return t.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0),void 0;var e=this._get_settings().checkbox.real_checkboxes,s=t.find("> ul > .jstree-checked").length,i=t.find("> ul > .jstree-undetermined").length,n=t.find("> ul > li").length;0===n?t.hasClass("jstree-undetermined")&&this.change_state(t,!1):0===s&&0===i?this.change_state(t,!0):s===n?this.change_state(t,!1):(t.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),e&&t.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var e=this,s=this.data.ui.to_select;s=t.map(t.makeArray(s),function(t){return"#"+t.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.deselect_all(),t.each(s,function(t,s){e.check_node(s)}),this.__callback()}else this.__call_old()},save_loaded:function(){var t=this;this.data.core.to_load=[],this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&t.data.core.to_load.push("#"+this.id)})}}}),t(function(){var e=".jstree .jstree-real-checkbox { display:none; } ";t.vakata.css.add_sheet({str:e,title:"jstree"})})}(jQuery),function(t){t.vakata.xslt=function(e,s,i){var n,a,r,o,l="";return document.recalc?(n=document.createElement("xml"),a=document.createElement("xml"),n.innerHTML=e,a.innerHTML=s,t("body").append(n).append(a),setTimeout(function(e,s,i){return function(){i.call(null,e.transformNode(s.XMLDocument)),setTimeout(function(e,s){return function(){t(e).remove(),t(s).remove()}}(e,s),200)}}(n,a,i),100),!0):("undefined"!=typeof window.DOMParser&&"undefined"!=typeof window.XMLHttpRequest&&"undefined"==typeof window.XSLTProcessor&&(e=(new DOMParser).parseFromString(e,"text/xml"),s=(new DOMParser).parseFromString(s,"text/xml")),"undefined"!=typeof window.DOMParser&&"undefined"!=typeof window.XMLHttpRequest&&"undefined"!=typeof window.XSLTProcessor?(r=new XSLTProcessor,(o=t.isFunction(r.transformDocument)?"undefined"!=typeof window.XMLSerializer:!0)?(e=(new DOMParser).parseFromString(e,"text/xml"),s=(new DOMParser).parseFromString(s,"text/xml"),t.isFunction(r.transformDocument)?(l=document.implementation.createDocument("","",null),r.transformDocument(e,s,l,null),i.call(null,(new XMLSerializer).serializeToString(l)),!0):(r.importStylesheet(s),l=r.transformToFragment(e,document),i.call(null,t("<div />").append(l).html()),!0)):!1):!1)};var e={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">	<xsl:call-template name="nodes">		<xsl:with-param name="node" select="/root" />	</xsl:call-template></xsl:template><xsl:template name="nodes">	<xsl:param name="node" />	<ul>	<xsl:for-each select="$node/item">		<xsl:variable name="children" select="count(./item) &gt; 0" />		<li>			<xsl:attribute name="class">				<xsl:if test="position() = last()">jstree-last </xsl:if>				<xsl:choose>					<xsl:when test="@state = \'open\'">jstree-open </xsl:when>					<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>					<xsl:otherwise>jstree-leaf </xsl:otherwise>				</xsl:choose>				<xsl:value-of select="@class" />			</xsl:attribute>			<xsl:for-each select="@*">				<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">					<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>				</xsl:if>			</xsl:for-each>	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>			<xsl:for-each select="content/name">				<a>				<xsl:attribute name="href">					<xsl:choose>					<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>					<xsl:otherwise>#</xsl:otherwise>					</xsl:choose>				</xsl:attribute>				<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>				<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>				<xsl:for-each select="@*">					<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">						<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>					</xsl:if>				</xsl:for-each>					<ins>						<xsl:attribute name="class">jstree-icon 							<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>						</xsl:attribute>						<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>						<xsl:text>&#xa0;</xsl:text>					</ins>					<xsl:copy-of select="./child::node()" />				</a>			</xsl:for-each>			<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>		</li>	</xsl:for-each>	</ul></xsl:template></xsl:stylesheet>',flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">	<ul>	<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">		<xsl:call-template name="nodes">			<xsl:with-param name="node" select="." />			<xsl:with-param name="is_last" select="number(position() = last())" />		</xsl:call-template>	</xsl:for-each>	</ul></xsl:template><xsl:template name="nodes">	<xsl:param name="node" />	<xsl:param name="is_last" />	<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />	<li>	<xsl:attribute name="class">		<xsl:if test="$is_last = true()">jstree-last </xsl:if>		<xsl:choose>			<xsl:when test="@state = \'open\'">jstree-open </xsl:when>			<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>			<xsl:otherwise>jstree-leaf </xsl:otherwise>		</xsl:choose>		<xsl:value-of select="@class" />	</xsl:attribute>	<xsl:for-each select="@*">		<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">		<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>		</xsl:if>	</xsl:for-each>	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>	<xsl:for-each select="content/name">		<a>		<xsl:attribute name="href">			<xsl:choose>			<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>			<xsl:otherwise>#</xsl:otherwise>			</xsl:choose>		</xsl:attribute>		<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>		<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>		<xsl:for-each select="@*">			<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">				<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>			</xsl:if>		</xsl:for-each>			<ins>				<xsl:attribute name="class">jstree-icon 					<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>				</xsl:attribute>				<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>				<xsl:text>&#xa0;</xsl:text>			</ins>			<xsl:copy-of select="./child::node()" />		</a>	</xsl:for-each>	<xsl:if test="$children">		<ul>		<xsl:for-each select="//item[@parent_id=$node/attribute::id]">			<xsl:call-template name="nodes">				<xsl:with-param name="node" select="." />				<xsl:with-param name="is_last" select="number(position() = last())" />			</xsl:call-template>		</xsl:for-each>		</ul>	</xsl:if>	</li></xsl:template></xsl:stylesheet>'},s=function(t){return t.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};t.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(t,e,s){var i=this;this.load_node_xml(t,function(){i.__callback({obj:i._get_node(t)}),e.call(this)},s)},_is_loaded:function(e){var s=this._get_settings().xml_data;return e=this._get_node(e),-1==e||!e||!s.ajax&&!t.isFunction(s.data)||e.is(".jstree-open, .jstree-leaf")||e.children("ul").children("li").size()>0},load_node_xml:function(e,s,i){var n=this.get_settings().xml_data,a=function(){},r=function(){};if(e=this._get_node(e),e&&-1!==e){if(e.data("jstree_is_loading"))return;e.data("jstree_is_loading",!0)}switch(!0){case!n.data&&!n.ajax:throw"Neither data nor ajax settings supplied.";case t.isFunction(n.data):n.data.call(this,e,t.proxy(function(i){this.parse_xml(i,t.proxy(function(i){i&&(i=i.replace(/ ?xmlns="[^"]*"/gi,""),i.length>10?(i=t(i),-1!==e&&e?(e.children("a.jstree-loading").removeClass("jstree-loading"),e.append(i),e.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(i.children()),n.clean_node&&this.clean_node(e),s&&s.call(this)):e&&-1!==e?(e.children("a.jstree-loading").removeClass("jstree-loading"),e.removeData("jstree_is_loading"),n.correct_state&&(this.correct_state(e),s&&s.call(this))):n.correct_state&&(this.get_container().children("ul").empty(),s&&s.call(this)))},this))},this));break;case!!n.data&&!n.ajax||!!n.data&&!!n.ajax&&(!e||-1===e):e&&-1!=e||this.parse_xml(n.data,t.proxy(function(i){i?(i=i.replace(/ ?xmlns="[^"]*"/gi,""),i.length>10&&(i=t(i),this.get_container().children("ul").empty().append(i.children()),n.clean_node&&this.clean_node(e),s&&s.call(this))):n.correct_state&&(this.get_container().children("ul").empty(),s&&s.call(this))},this));break;case!n.data&&!!n.ajax||!!n.data&&!!n.ajax&&e&&-1!==e:a=function(t,s,a){var r=this.get_settings().xml_data.ajax.error;r&&r.call(this,t,s,a),-1!==e&&e.length?(e.children("a.jstree-loading").removeClass("jstree-loading"),e.removeData("jstree_is_loading"),"success"===s&&n.correct_state&&this.correct_state(e)):"success"===s&&n.correct_state&&this.get_container().children("ul").empty(),i&&i.call(this)},r=function(i,r,o){i=o.responseText;var l=this.get_settings().xml_data.ajax.success;return l&&(i=l.call(this,i,r,o)||i),""===i||i&&i.toString&&""===i.toString().replace(/^[\s\n]+$/,"")?a.call(this,o,r,""):(this.parse_xml(i,t.proxy(function(i){i&&(i=i.replace(/ ?xmlns="[^"]*"/gi,""),i.length>10?(i=t(i),-1!==e&&e?(e.children("a.jstree-loading").removeClass("jstree-loading"),e.append(i),e.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(i.children()),n.clean_node&&this.clean_node(e),s&&s.call(this)):e&&-1!==e?(e.children("a.jstree-loading").removeClass("jstree-loading"),e.removeData("jstree_is_loading"),n.correct_state&&(this.correct_state(e),s&&s.call(this))):n.correct_state&&(this.get_container().children("ul").empty(),s&&s.call(this)))},this)),void 0)},n.ajax.context=this,n.ajax.error=a,n.ajax.success=r,n.ajax.dataType||(n.ajax.dataType="xml"),t.isFunction(n.ajax.url)&&(n.ajax.url=n.ajax.url.call(this,e)),t.isFunction(n.ajax.data)&&(n.ajax.data=n.ajax.data.call(this,e)),t.ajax(n.ajax)}},parse_xml:function(s,i){var n=this._get_settings().xml_data;t.vakata.xslt(s,e[n.xsl],i)},get_xml:function(e,i,n,a,r){var o,l,d,c,h,u="",_=this._get_settings(),p=this;return e||(e="flat"),r||(r=0),i=this._get_node(i),i&&-1!==i||(i=this.get_container().find("> ul > li")),n=t.isArray(n)?n:["id","class"],!r&&this.data.types&&-1===t.inArray(_.types.type_attr,n)&&n.push(_.types.type_attr),a=t.isArray(a)?a:[],r||(_.xml_data.get_include_preamble&&(u+='<?xml version="1.0" encoding="UTF-8"?>'),u+="<root>"),i.each(function(){u+="<item",d=t(this),t.each(n,function(t,e){var i=d.attr(e);_.xml_data.get_skip_empty&&"undefined"==typeof i||(u+=" "+e+'="'+s((" "+(i||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"')}),d.hasClass("jstree-open")&&(u+=' state="open"'),d.hasClass("jstree-closed")&&(u+=' state="closed"'),"flat"===e&&(u+=' parent_id="'+s(r)+'"'),u+=">",u+="<content>",c=d.children("a"),c.each(function(){o=t(this),h=!1,u+="<name",-1!==t.inArray("languages",_.plugins)&&t.each(_.languages,function(t,e){return o.hasClass(e)?(u+=' lang="'+s(e)+'"',h=e,!1):void 0}),a.length&&t.each(a,function(t,e){var i=o.attr(e);_.xml_data.get_skip_empty&&"undefined"==typeof i||(u+=" "+e+'="'+s((" "+i||"").replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"')}),o.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(u+=' icon="'+s(o.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"'),o.children("ins").get(0).style.backgroundImage.length&&(u+=' icon="'+s(o.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/gi,"").replace(/"/gi,""))+'"'),u+=">",u+="<![CDATA["+p.get_text(o,h)+"]]>",u+="</name>"}),u+="</content>",l=d[0].id||!0,d=d.find("> ul > li"),l=d.length?p.get_xml(e,d,n,a,l):"","nest"==e&&(u+=l),u+="</item>","flat"==e&&(u+=l)}),r||(u+="</root>"),u}}})}(jQuery),function(t){t.expr[":"].jstree_contains=function(t,e,s){return(t.textContent||t.innerText||"").toLowerCase().indexOf(s[3].toLowerCase())>=0},t.expr[":"].jstree_title_contains=function(t,e,s){return(t.getAttribute("title")||"").toLowerCase().indexOf(s[3].toLowerCase())>=0},t.jstree.plugin("search",{__init:function(){this.data.search.str="",this.data.search.result=t(),this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(e,s){t(this).children("ul").find("li").hide().removeClass("jstree-last"),s.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){t(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){t(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(e,s){if(""===t.trim(e))return this.clear_search(),void 0;var i=this.get_settings().search,n=this,a=function(){},r=function(){};return this.data.search.str=e,!s&&i.ajax!==!1&&this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length>0?(this.search.supress_callback=!0,a=function(){},r=function(t,e,s){var i=this.get_settings().search.ajax.success;i&&(t=i.call(this,t,e,s)||t),this.data.search.to_open=t,this._search_open()},i.ajax.context=this,i.ajax.error=a,i.ajax.success=r,t.isFunction(i.ajax.url)&&(i.ajax.url=i.ajax.url.call(this,e)),t.isFunction(i.ajax.data)&&(i.ajax.data=i.ajax.data.call(this,e)),i.ajax.data||(i.ajax.data={search_string:e}),(!i.ajax.dataType||/^json/.exec(i.ajax.dataType))&&(i.ajax.dataType="json"),t.ajax(i.ajax),void 0):(this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+i.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){n.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,str:e}),void 0)},clear_search:function(){this.data.search.result.removeClass("jstree-search"),this.__callback(this.data.search.result),this.data.search.result=t()},_search_open:function(){var e=this,s=!0,i=[],n=[];this.data.search.to_open.length&&(t.each(this.data.search.to_open,function(e,s){return"#"==s?!0:(t(s).length&&t(s).is(".jstree-closed")?i.push(s):n.push(s),void 0)}),i.length&&(this.data.search.to_open=n,t.each(i,function(t,s){e.open_node(s,function(){e._search_open(!0)})}),s=!1)),s&&this.search(this.data.search.str,!0)}}})}(jQuery),function(t){t.vakata.context={hide_on_mouseleave:!1,cnt:t("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(e,s,i,n,a,r,o){t.vakata.context.rtl=!!o;var l,d,c=t.vakata.context.parse(e);c&&(t.vakata.context.vis=!0,t.vakata.context.tgt=s,t.vakata.context.par=r||s||null,t.vakata.context.data=a||null,t.vakata.context.cnt.html(c).css({visibility:"hidden",display:"block",left:0,top:0}),t.vakata.context.hide_on_mouseleave&&t.vakata.context.cnt.one("mouseleave",function(){t.vakata.context.hide()}),l=t.vakata.context.cnt.height(),d=t.vakata.context.cnt.width(),i+d>t(document).width()&&(i=t(document).width()-(d+5),t.vakata.context.cnt.find("li > ul").addClass("right")),n+l>t(document).height()&&(n-=l+s[0].offsetHeight,t.vakata.context.cnt.find("li > ul").addClass("bottom")),t.vakata.context.cnt.css({left:i,top:n}).find("li:has(ul)").bind("mouseenter",function(){var e=t(document).width(),s=t(document).height(),i=t(this).children("ul").show();e!==t(document).width()&&i.toggleClass("right"),s!==t(document).height()&&i.toggleClass("bottom")}).bind("mouseleave",function(){t(this).children("ul").hide()}).end().css({visibility:"visible"}).show(),t(document).triggerHandler("context_show.vakata"))},hide:function(){t.vakata.context.vis=!1,t.vakata.context.cnt.attr("class","").css({visibility:"hidden"}),t(document).triggerHandler("context_hide.vakata")},parse:function(e,s){if(!e)return!1;var i="",n=!1,a=!0;return s||(t.vakata.context.func={}),i+="<ul>",t.each(e,function(e,s){return s?(t.vakata.context.func[e]=s.action,!a&&s.separator_before&&(i+="<li class='vakata-separator vakata-separator-before'></li>"),a=!1,i+="<li class='"+(s._class||"")+(s._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ",s.icon&&-1===s.icon.indexOf("/")&&(i+=" class='"+s.icon+"' "),s.icon&&-1!==s.icon.indexOf("/")&&(i+=" style='background:url("+s.icon+") center center no-repeat;' "),i+=">&#160;</ins><a href='#' rel='"+e+"'>",s.submenu&&(i+="<span style='float:"+(t.vakata.context.rtl?"left":"right")+";'>&raquo;</span>"),i+=s.label+"</a>",s.submenu&&(n=t.vakata.context.parse(s.submenu,!0),n&&(i+=n)),i+="</li>",s.separator_after&&(i+="<li class='vakata-separator vakata-separator-after'></li>",a=!0),void 0):!0}),i=i.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,""),i+="</ul>",t(document).triggerHandler("context_parse.vakata"),i.length>10?i:!1},exec:function(e){return t.isFunction(t.vakata.context.func[e])?(t.vakata.context.func[e].call(t.vakata.context.data,t.vakata.context.par),!0):!1}},t(function(){var e="#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ";t.vakata.css.add_sheet({str:e,title:"vakata"}),t.vakata.context.cnt.delegate("a","click",function(t){t.preventDefault()}).delegate("a","mouseup",function(){!t(this).parent().hasClass("jstree-contextmenu-disabled")&&t.vakata.context.exec(t(this).attr("rel"))?t.vakata.context.hide():t(this).blur()}).delegate("a","mouseover",function(){t.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body"),t(document).bind("mousedown",function(e){t.vakata.context.vis&&!t.contains(t.vakata.context.cnt[0],e.target)&&t.vakata.context.hide()}),"undefined"!=typeof t.hotkeys&&t(document).bind("keydown","up",function(e){if(t.vakata.context.vis){var s=t.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();s.length||(s=t.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last()),s.addClass("vakata-hover"),e.stopImmediatePropagation(),e.preventDefault()}}).bind("keydown","down",function(e){if(t.vakata.context.vis){var s=t.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();s.length||(s=t.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first()),s.addClass("vakata-hover"),e.stopImmediatePropagation(),e.preventDefault()}}).bind("keydown","right",function(e){t.vakata.context.vis&&(t.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),e.stopImmediatePropagation(),e.preventDefault())}).bind("keydown","left",function(e){t.vakata.context.vis&&(t.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),e.stopImmediatePropagation(),e.preventDefault())}).bind("keydown","esc",function(e){t.vakata.context.hide(),e.preventDefault()}).bind("keydown","space",function(e){t.vakata.context.cnt.find(".vakata-hover").last().children("a").click(),e.preventDefault()})}),t.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",t.proxy(function(e){e.preventDefault(),t(e.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY)},this)).delegate("a","click.jstree",t.proxy(function(){this.data.contextmenu&&t.vakata.context.hide()},this)).bind("destroy.jstree",t.proxy(function(){this.data.contextmenu&&t.vakata.context.hide()},this)),t(document).bind("context_hide.vakata",t.proxy(function(){this.data.contextmenu=!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(t){this.create(t)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(t){this.rename(t)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(t){this.is_selected(t)?this.remove():this.remove(t)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){this.cut(t)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){this.copy(t)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(t){this.paste(t)}}}}}},_fn:{show_contextmenu:function(e,s,i){e=this._get_node(e);var n=this.get_settings().contextmenu,a=e.children("a:visible:eq(0)"),r=!1,o=!1;n.select_node&&this.data.ui&&!this.is_selected(e)&&(this.deselect_all(),this.select_node(e,!0)),(n.show_at_node||"undefined"==typeof s||"undefined"==typeof i)&&(r=a.offset(),s=r.left,i=r.top+this.data.core.li_height),o=e.data("jstree")&&e.data("jstree").contextmenu?e.data("jstree").contextmenu:n.items,t.isFunction(o)&&(o=o.call(this,e)),this.data.contextmenu=!0,t.vakata.context.show(o,a,s,i,this,e,this._get_settings().core.rtl),this.data.themes&&t.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})}(jQuery),function(e){e.jstree.plugin("types",{__init:function(){var s=this._get_settings().types;this.data.types.attach_to=[],this.get_container().bind("init.jstree",e.proxy(function(){var t=s.types,i=s.type_attr,n="",a=this;e.each(t,function(t,s){return e.each(s,function(t){/^(max_depth|max_children|icon|valid_children)$/.test(t)||a.data.types.attach_to.push(t)}),s.icon?((s.icon.image||s.icon.position)&&(n+="default"==t?".jstree-"+a.get_index()+" a > .jstree-icon { ":".jstree-"+a.get_index()+" li["+i+'="'+t+'"] > a > .jstree-icon { ',s.icon.image&&(n+=" background-image:url("+s.icon.image+"); "),n+=s.icon.position?" background-position:"+s.icon.position+"; ":" background-position:0 0; ",n+="} "),void 0):!0}),""!==n&&e.vakata.css.add_sheet({str:n,title:"jstree-types"})},this)).bind("before.jstree",e.proxy(function(t,s){var i,n,a=this._get_settings().types.use_data?this._get_node(s.args[0]):!1,r=a&&-1!==a&&a.length?a.data("jstree"):!1;if(r&&r.types&&r.types[s.func]===!1)return t.stopImmediatePropagation(),!1;if(-1!==e.inArray(s.func,this.data.types.attach_to)){if(!s.args[0]||!s.args[0].tagName&&!s.args[0].jquery)return;if(i=this._get_settings().types.types,n=this._get_type(s.args[0]),(i[n]&&"undefined"!=typeof i[n][s.func]||i["default"]&&"undefined"!=typeof i["default"][s.func])&&this._check(s.func,s.args[0])===!1)return t.stopImmediatePropagation(),!1}},this)),t&&this.get_container().bind("load_node.jstree set_type.jstree",e.proxy(function(t,s){var i=s&&s.rslt&&s.rslt.obj&&-1!==s.rslt.obj?this._get_node(s.rslt.obj).parent():this.get_container_ul(),n=!1,a=this._get_settings().types;e.each(a.types,function(t,e){e.icon&&(e.icon.image||e.icon.position)&&(n="default"===t?i.find("li > a > .jstree-icon"):i.find("li["+a.type_attr+"='"+t+"'] > a > .jstree-icon"),e.icon.image&&n.css("backgroundImage","url("+e.icon.image+")"),n.css("backgroundPosition",e.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(t,e){e.type&&this._get_settings().types.use_data&&this.set_type(e.type,t)},_get_type:function(t){return t=this._get_node(t),t&&t.length?t.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(t,e){e=this._get_node(e);var s=e.length&&t?e.attr(this._get_settings().types.type_attr,t):!1;
return s&&this.__callback({obj:e,type:t}),s},_check:function(t,s,i){s=this._get_node(s);var n=!1,a=this._get_type(s),r=0,o=this,l=this._get_settings().types,d=!1;if(-1===s){if(!l[t])return;n=l[t]}else{if(a===!1)return;d=l.use_data?s.data("jstree"):!1,d&&d.types&&"undefined"!=typeof d.types[t]?n=d.types[t]:l.types[a]&&"undefined"!=typeof l.types[a][t]?n=l.types[a][t]:l.types["default"]&&"undefined"!=typeof l.types["default"][t]&&(n=l.types["default"][t])}return e.isFunction(n)&&(n=n.call(this,s)),"max_depth"===t&&-1!==s&&i!==!1&&-2!==l.max_depth&&0!==n&&s.children("a:eq(0)").parentsUntil(".jstree","li").each(function(e){return-1!==l.max_depth&&l.max_depth-(e+1)<=0?(n=0,!1):(r=0===e?n:o._check(t,this,!1),-1!==r&&0>=r-(e+1)?(n=0,!1):(r>=0&&(n>r-(e+1)||0>n)&&(n=r-(e+1)),l.max_depth>=0&&(l.max_depth-(e+1)<n||0>n)&&(n=l.max_depth-(e+1)),void 0))}),n},check_move:function(){if(!this.__call_old())return!1;var t,s=this._get_move(),i=s.rt._get_settings().types,n=s.rt._check("max_children",s.cr),a=s.rt._check("max_depth",s.cr),r=s.rt._check("valid_children",s.cr),o=0,l=1;if("none"===r)return!1;if(e.isArray(r)&&s.ot&&s.ot._get_type&&(s.o.each(function(){return-1===e.inArray(s.ot._get_type(this),r)?(l=!1,!1):void 0}),l===!1))return!1;if(-2!==i.max_children&&-1!==n&&(o=-1===s.cr?this.get_container().find("> ul > li").not(s.o).length:s.cr.find("> ul > li").not(s.o).length,o+s.o.length>n))return!1;if(-2!==i.max_depth&&-1!==a){if(l=0,0===a)return!1;if("undefined"==typeof s.o.d){for(t=s.o;t.length>0;)t=t.find("> ul > li"),l++;s.o.d=l}if(a-s.o.d<0)return!1}return!0},create_node:function(t,s,i,n,a,r){if(!r&&(a||this._is_loaded(t))){var o,l="string"==typeof s&&s.match(/^before|after$/i)&&-1!==t?this._get_parent(t):this._get_node(t),d=this._get_settings().types,c=this._check("max_children",l),h=this._check("max_depth",l),u=this._check("valid_children",l);if("string"==typeof i&&(i={data:i}),i||(i={}),"none"===u)return!1;if(e.isArray(u))if(i.attr&&i.attr[d.type_attr]){if(-1===e.inArray(i.attr[d.type_attr],u))return!1}else i.attr||(i.attr={}),i.attr[d.type_attr]=u[0];if(-2!==d.max_children&&-1!==c&&(o=-1===l?this.get_container().find("> ul > li").length:l.find("> ul > li").length,o+1>c))return!1;if(-2!==d.max_depth&&-1!==h&&0>h-1)return!1}return this.__call_old(!0,t,s,i,n,a,r)}}})}(jQuery),function(t){t.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0),this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(t,e,s){var i=this;this.load_node_html(t,function(){i.__callback({obj:i._get_node(t)}),e.call(this)},s)},_is_loaded:function(e){return e=this._get_node(e),-1==e||!e||!this._get_settings().html_data.ajax&&!t.isFunction(this._get_settings().html_data.data)||e.is(".jstree-open, .jstree-leaf")||e.children("ul").children("li").size()>0},load_node_html:function(e,s,i){var n,a=this.get_settings().html_data,r=function(){},o=function(){};if(e=this._get_node(e),e&&-1!==e){if(e.data("jstree_is_loading"))return;e.data("jstree_is_loading",!0)}switch(!0){case t.isFunction(a.data):a.data.call(this,e,t.proxy(function(i){i&&""!==i&&i.toString&&""!==i.toString().replace(/^[\s\n]+$/,"")?(i=t(i),i.is("ul")||(i=t("<ul />").append(i)),-1!=e&&e?(e.children("a.jstree-loading").removeClass("jstree-loading"),e.append(i).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),e.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(i.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(e),s&&s.call(this)):e&&-1!==e?(e.children("a.jstree-loading").removeClass("jstree-loading"),e.removeData("jstree_is_loading"),a.correct_state&&(this.correct_state(e),s&&s.call(this))):a.correct_state&&(this.get_container().children("ul").empty(),s&&s.call(this))},this));break;case!a.data&&!a.ajax:e&&-1!=e||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),s&&s.call(this);break;case!!a.data&&!a.ajax||!!a.data&&!!a.ajax&&(!e||-1===e):e&&-1!=e||(n=t(a.data),n.is("ul")||(n=t("<ul />").append(n)),this.get_container().children("ul").empty().append(n.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),s&&s.call(this);break;case!a.data&&!!a.ajax||!!a.data&&!!a.ajax&&e&&-1!==e:e=this._get_node(e),r=function(t,s,n){var r=this.get_settings().html_data.ajax.error;r&&r.call(this,t,s,n),-1!=e&&e.length?(e.children("a.jstree-loading").removeClass("jstree-loading"),e.removeData("jstree_is_loading"),"success"===s&&a.correct_state&&this.correct_state(e)):"success"===s&&a.correct_state&&this.get_container().children("ul").empty(),i&&i.call(this)},o=function(i,n,o){var l=this.get_settings().html_data.ajax.success;return l&&(i=l.call(this,i,n,o)||i),""===i||i&&i.toString&&""===i.toString().replace(/^[\s\n]+$/,"")?r.call(this,o,n,""):(i?(i=t(i),i.is("ul")||(i=t("<ul />").append(i)),-1!=e&&e?(e.children("a.jstree-loading").removeClass("jstree-loading"),e.append(i).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),e.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(i.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(e),s&&s.call(this)):e&&-1!==e?(e.children("a.jstree-loading").removeClass("jstree-loading"),e.removeData("jstree_is_loading"),a.correct_state&&(this.correct_state(e),s&&s.call(this))):a.correct_state&&(this.get_container().children("ul").empty(),s&&s.call(this)),void 0)},a.ajax.context=this,a.ajax.error=r,a.ajax.success=o,a.ajax.dataType||(a.ajax.dataType="html"),t.isFunction(a.ajax.url)&&(a.ajax.url=a.ajax.url.call(this,e)),t.isFunction(a.ajax.data)&&(a.ajax.data=a.ajax.data.call(this,e)),t.ajax(a.ajax)}}}}),t.jstree.defaults.plugins.push("html_data")}(jQuery),function(t){t.jstree.plugin("themeroller",{__init:function(){var e=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(s){t(s.currentTarget).hasClass("jstree-loading")||t(this).addClass(e.item_h)}).delegate("a","mouseleave.jstree",function(){t(this).removeClass(e.item_h)}).bind("init.jstree",t.proxy(function(t,e){e.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh"),this._themeroller(e.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",t.proxy(function(t,e){this._themeroller(e.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",t.proxy(function(){this._themeroller()},this)).bind("close_node.jstree",t.proxy(function(t,e){this._themeroller(e.rslt.obj)},this)).bind("delete_node.jstree",t.proxy(function(t,e){this._themeroller(e.rslt.parent)},this)).bind("correct_state.jstree",t.proxy(function(t,s){s.rslt.obj.children("ins.jstree-icon").removeClass(e.opened+" "+e.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===this.className.toString().replace(e.item_clsd,"").replace(e.item_open,"").replace(e.item_leaf,"").indexOf("ui-icon-")}).removeClass(e.item_open+" "+e.item_clsd).addClass(e.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",t.proxy(function(t,s){s.rslt.obj.children("a").addClass(e.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",t.proxy(function(){this.get_container().find("a."+e.item_a).removeClass(e.item_a).end().find("a.jstree-clicked").addClass(e.item_a)},this)).bind("dehover_node.jstree",t.proxy(function(t,s){s.rslt.obj.children("a").removeClass(e.item_h)},this)).bind("hover_node.jstree",t.proxy(function(t,s){this.get_container().find("a."+e.item_h).not(s.rslt.obj).removeClass(e.item_h),s.rslt.obj.children("a").addClass(e.item_h)},this)).bind("move_node.jstree",t.proxy(function(t,e){this._themeroller(e.rslt.o),this._themeroller(e.rslt.op)},this))},__destroy:function(){var e=this._get_settings().themeroller,s=["ui-icon"];t.each(e,function(t,e){e=e.split(" "),e.length&&(s=s.concat(e))}),this.get_container().removeClass("ui-widget-content").find("."+s.join(", .")).removeClass(s.join(" "))},_fn:{_themeroller:function(t){var e=this._get_settings().themeroller;t=t&&-1!=t?this._get_node(t).parent():this.get_container_ul(),t.find("li.jstree-closed").children("ins.jstree-icon").removeClass(e.opened).addClass("ui-icon "+e.closed).end().children("a").addClass(e.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(e.item_clsd,"").replace(e.item_open,"").replace(e.item_leaf,"").indexOf("ui-icon-")}).removeClass(e.item_leaf+" "+e.item_open).addClass(e.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(e.closed).addClass("ui-icon "+e.opened).end().children("a").addClass(e.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(e.item_clsd,"").replace(e.item_open,"").replace(e.item_leaf,"").indexOf("ui-icon-")}).removeClass(e.item_leaf+" "+e.item_clsd).addClass(e.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(e.closed+" ui-icon "+e.opened).end().children("a").addClass(e.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(e.item_clsd,"").replace(e.item_open,"").replace(e.item_leaf,"").indexOf("ui-icon-")}).removeClass(e.item_clsd+" "+e.item_open).addClass(e.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}}),t(function(){var e=".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }";t.vakata.css.add_sheet({str:e,title:"jstree"})})}(jQuery),function(t){t.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",t.proxy(function(e,s){var i,n,a=[],r=!0;return"move_node"==s.func&&s.args[4]===!0&&s.args[0].o&&s.args[0].o.length&&(s.args[0].o.children("a").each(function(){a.push(t(this).text().replace(/^\s+/g,""))}),r=this._check_unique(a,s.args[0].np.find("> ul > li").not(s.args[0].o),"move_node")),"create_node"==s.func&&(s.args[4]||this._is_loaded(s.args[0]))&&(i=this._get_node(s.args[0]),!s.args[1]||"before"!==s.args[1]&&"after"!==s.args[1]||(i=this._get_parent(s.args[0]),i&&-1!==i||(i=this.get_container())),"string"==typeof s.args[2]?a.push(s.args[2]):s.args[2]&&s.args[2].data?a.push(s.args[2].data):a.push(this._get_string("new_node")),r=this._check_unique(a,i.find("> ul > li"),"create_node")),"rename_node"==s.func&&(a.push(s.args[1]),n=this._get_node(s.args[0]),i=this._get_parent(n),i&&-1!==i||(i=this.get_container()),r=this._check_unique(a,i.find("> ul > li").not(n),"rename_node")),r?void 0:(e.stopPropagation(),!1)},this))},defaults:{error_callback:t.noop},_fn:{_check_unique:function(e,s,i){var n=[];return s.children("a").each(function(){n.push(t(this).text().replace(/^\s+/g,""))}),n.length&&e.length?(n=n.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(","),n.length+e.length!=n.concat(e).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length?(this._get_settings().unique.error_callback.call(null,e,s,i),!1):!0):!0},check_move:function(){if(!this.__call_old())return!1;var e=this._get_move(),s=[];return e.o&&e.o.length?(e.o.children("a").each(function(){s.push(t(this).text().replace(/^\s+/g,""))}),this._check_unique(s,e.np.find("> ul > li").not(e.o),"check_move")):!0}}})}(jQuery),function(i){i.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1,this.data.wholerow.to=!1,this.get_container().bind("init.jstree",i.proxy(function(){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",i.proxy(function(t,e){this._prepare_wholerow_span(e&&e.rslt&&e.rslt.obj?e.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",i.proxy(function(t,e){this.data.to&&clearTimeout(this.data.to),this.data.to=setTimeout(function(t,e){return function(){t._prepare_wholerow_ul(e)}}(this,e&&e.rslt&&e.rslt.obj?e.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",i.proxy(function(){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",i.proxy(function(t,e){e.rslt.obj.each(function(){var t=e.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((i(this).offset().top-e.inst.get_container().offset().top+e.inst.get_container()[0].scrollTop)/e.inst.data.core.li_height,10)+")");t.children("a").attr("class",e.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",i.proxy(function(t,e){if(this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:"")),"hover_node"===t.type){var s=this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((e.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")");s.children("a").attr("class",e.rslt.obj.children(".jstree-hovered").attr("class"))}},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(t){var e=i(t.currentTarget);"A"===t.target.tagName||"INS"===t.target.tagName&&e.closest("li").is(".jstree-open, .jstree-closed")||(e.closest("li").children("a:visible:eq(0)").click(),t.stopImmediatePropagation())}).delegate("li","mouseover.jstree",i.proxy(function(t){return t.stopImmediatePropagation(),i(t.currentTarget).children(".jstree-hovered, .jstree-clicked").length?!1:(this.hover_node(t.currentTarget),!1)},this)).delegate("li","mouseleave.jstree",i.proxy(function(t){i(t.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(t.currentTarget)},this)),(e||t)&&i.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove(),this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(t){t=t&&-1!=t?this._get_node(t):this.get_container().find("> ul > li"),t!==!1&&t.each(function(){i(this).find("li").andSelf().each(function(){var t=i(this);return t.children(".jstree-wholerow-span").length?!0:(t.prepend("<span class='jstree-wholerow-span' style='width:"+18*t.parentsUntil(".jstree","li").length+"px;'>&#160;</span>"),void 0)})})},_prepare_wholerow_ul:function(){var t=this.get_container().children("ul").eq(0),s=t.html();t.addClass("jstree-wholerow-real"),this.data.wholerow.last_html!==s&&(this.data.wholerow.last_html=s,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(t.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(t.parent()[0].scrollWidth).css("top",-1*(t.height()+(e?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}}),i(function(){var n=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";s&&(n+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } "),(e||t)&&(n+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } "),i.vakata.css.add_sheet({str:n,title:"jstree"})})}(jQuery),function(t){var e=["getChildren","getChildrenCount","getAttr","getName","getProps"],s=function(e,s){var i=!0;return e=e||{},s=[].concat(s),t.each(s,function(s,n){return t.isFunction(e[n])?void 0:(i=!1,!1)}),i};t.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(i,n){var a=-1==i?this._get_settings().model.object:i.data("jstree_model");return s(a,e)?(this._get_settings().model.async?a.getChildren(t.proxy(function(t){this.model_done(t,n)},this)):this.model_done(a.getChildren(),n),void 0):n.call(null,!1)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(e,s){var i=[],n=this._get_settings(),a=this;t.isArray(e)||(e=[e]),t.each(e,function(e,s){var r=s.getProps()||{};r.attr=s.getAttr()||{},s.getChildrenCount()&&(r.state="closed"),r.data=s.getName(),t.isArray(r.data)||(r.data=[r.data]),a.data.types&&t.isFunction(s.getType)&&(r.attr[n.types.type_attr]=s.getType()),r.attr.id&&n.model.id_prefix&&(r.attr.id=n.model.id_prefix+r.attr.id),r.metadata||(r.metadata={}),r.metadata.jstree_model=s,i.push(r)}),s.call(null,i)}}})}(jQuery)}}(),function(t,e,s,i){function n(t){return("string"==typeof t||t instanceof String)&&(t=t.replace(/^[\\/'"]+|(;\s?})+|[\\/'"]+$/g,"")),t}0===t("head").has(".foundation-mq-small").length&&t("head").append('<meta class="foundation-mq-small">'),0===t("head").has(".foundation-mq-medium").length&&t("head").append('<meta class="foundation-mq-medium">'),0===t("head").has(".foundation-mq-large").length&&t("head").append('<meta class="foundation-mq-large">'),0===t("head").has(".foundation-mq-xlarge").length&&t("head").append('<meta class="foundation-mq-xlarge">'),0===t("head").has(".foundation-mq-xxlarge").length&&t("head").append('<meta class="foundation-mq-xxlarge">'),t(function(){"undefined"!=typeof FastClick&&"undefined"!=typeof s.body&&FastClick.attach(s.body)});var a=function(e,i){return"string"==typeof e?i?t(i.querySelectorAll(e)):t(s.querySelectorAll(e)):t(e,i)};e.matchMedia=e.matchMedia||function(t){var e,s=t.documentElement,i=s.firstElementChild||s.firstChild,n=t.createElement("body"),a=t.createElement("div");return a.id="mq-test-1",a.style.cssText="position:absolute;top:-100em",n.style.background="none",n.appendChild(a),function(t){return a.innerHTML='&shy;<style media="'+t+'"> #mq-test-1 { width: 42px; }</style>',s.insertBefore(n,i),e=42===a.offsetWidth,s.removeChild(n),{matches:e,media:t}}}(s),function(){function t(){s&&(a(t),jQuery.fx.tick())}for(var s,i=0,n=["webkit","moz"],a=e.requestAnimationFrame,r=e.cancelAnimationFrame;i<n.length&&!a;i++)a=e[n[i]+"RequestAnimationFrame"],r=r||e[n[i]+"CancelAnimationFrame"]||e[n[i]+"CancelRequestAnimationFrame"];a?(e.requestAnimationFrame=a,e.cancelAnimationFrame=r,jQuery.fx.timer=function(e){e()&&jQuery.timers.push(e)&&!s&&(s=!0,t())},jQuery.fx.stop=function(){s=!1}):(e.requestAnimationFrame=function(t){var s=(new Date).getTime(),n=Math.max(0,16-(s-i)),a=e.setTimeout(function(){t(s+n)},n);return i=s+n,a},e.cancelAnimationFrame=function(t){clearTimeout(t)})}(jQuery),e.Foundation={name:"Foundation",version:"5.0.3",media_queries:{small:a(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:a(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:a(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:a(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:a(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:t("<style></style>").appendTo("head")[0].sheet,init:function(t,e,s,i,n){var r=[t,s,i,n],o=[];if(this.rtl=/rtl/i.test(a("html").attr("dir")),this.scope=t||this.scope,e&&"string"==typeof e&&!/reflow/i.test(e))this.libs.hasOwnProperty(e)&&o.push(this.init_lib(e,r));else for(var l in this.libs)o.push(this.init_lib(l,e));return t},init_lib:function(t,e){return this.libs.hasOwnProperty(t)?(this.patch(this.libs[t]),e&&e.hasOwnProperty(t)?this.libs[t].init.apply(this.libs[t],[this.scope,e[t]]):(e=e instanceof Array?e:Array(e),this.libs[t].init.apply(this.libs[t],e))):function(){}},patch:function(t){t.scope=this.scope,t.data_options=this.lib_methods.data_options,t.bindings=this.lib_methods.bindings,t.S=a,t.rtl=this.rtl},inherit:function(t,e){for(var s=e.split(" "),i=s.length-1;i>=0;i--)this.lib_methods.hasOwnProperty(s[i])&&(this.libs[t.name][s[i]]=this.lib_methods[s[i]])},random_str:function(t){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");t||(t=Math.floor(Math.random()*e.length));for(var s="",i=0;t>i;i++)s+=e[Math.floor(Math.random()*e.length)];return s},libs:{},lib_methods:{throttle:function(t,e){var s=null;return function(){var i=this,n=arguments;clearTimeout(s),s=setTimeout(function(){t.apply(i,n)},e)}},data_options:function(e){function s(t){return!isNaN(t-0)&&null!==t&&""!==t&&t!==!1&&t!==!0}function i(e){return"string"==typeof e?t.trim(e):e}var n,a,r,o,l={},d=e.data("options");if("object"==typeof d)return d;for(r=(d||":").split(";"),o=r.length,n=o-1;n>=0;n--)a=r[n].split(":"),/true/i.test(a[1])&&(a[1]=!0),/false/i.test(a[1])&&(a[1]=!1),s(a[1])&&(a[1]=parseInt(a[1],10)),2===a.length&&a[0].length>0&&(l[i(a[0])]=i(a[1]));return l},delay:function(t,e){return setTimeout(t,e)},empty:function(t){if(t.length&&t.length>0)return!1;if(t.length&&0===t.length)return!0;for(var e in t)if(hasOwnProperty.call(t,e))return!1;return!0},register_media:function(e,s){Foundation.media_queries[e]===i&&(t("head").append('<meta class="'+s+'">'),Foundation.media_queries[e]=n(t("."+s).css("font-family")))},addCustomRule:function(t,e){if(e===i)Foundation.stylesheet.insertRule(t,Foundation.stylesheet.cssRules.length);else{var s=Foundation.media_queries[e];s!==i&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[e]+"{ "+t+" }")}},loaded:function(t,e){function s(){e(t[0])}function i(){if(this.one("load",s),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var t=this.attr("src"),e=t.match(/\?/)?"&":"?";e+="random="+(new Date).getTime(),this.attr("src",t+e)}}return t.attr("src")?(t[0].complete||4===t[0].readyState?s():i.call(t),void 0):(s(),void 0)},bindings:function(e,s){var i=this,n=!a(this).data(this.name+"-init");return"string"==typeof e?this[e].call(this,s):(a(this.scope).is("[data-"+this.name+"]")?(a(this.scope).data(this.name+"-init",t.extend({},this.settings,s||e,this.data_options(a(this.scope)))),n&&this.events(this.scope)):a("[data-"+this.name+"]",this.scope).each(function(){var n=!a(this).data(i.name+"-init");a(this).data(i.name+"-init",t.extend({},i.settings,s||e,i.data_options(a(this)))),n&&i.events(this)}),void 0)}}},t.fn.foundation=function(){var t=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(t)),this})}}(jQuery,this,this.document),function(t,e,s){Foundation.libs.abide={name:"abide",version:"5.0.3",settings:{focus_on_invalid:!0,error_labels:!0,timeout:1e3,patterns:{alpha:/[a-zA-Z]+/,alpha_numeric:/[a-zA-Z0-9]+/,integer:/-?\d+/,number:/-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?/,password:/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,url:/(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/,datetime:/([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))/,time:/(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}/,dateISO:/\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/,month_day_year:/(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.](19|20)\d\d/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/}},timer:null,init:function(t,e,s){this.bindings(e,s)},events:function(e){var s=this,i=t(e).attr("novalidate","novalidate");i.data("abide-init"),i.off(".abide").on("submit.fndtn.abide validate.fndtn.abide",function(e){var i=/ajax/i.test(t(this).attr("data-abide"));return s.validate(t(this).find("input, textarea, select").get(),e,i)}).find("input, textarea, select").off(".abide").on("blur.fndtn.abide change.fndtn.abide",function(t){s.validate([this],t)}).on("keydown.fndtn.abide",function(e){var i=t(this).closest("form").data("abide-init");clearTimeout(s.timer),s.timer=setTimeout(function(){s.validate([this],e)}.bind(this),i.timeout)})},validate:function(e,s,i){for(var n=this.parse_patterns(e),a=n.length,r=t(e[0]).closest("form"),o=/submit/.test(s.type),l=0;a>l;l++)if(!n[l]&&(o||i))return this.settings.focus_on_invalid&&e[l].focus(),r.trigger("invalid"),t(e[l]).closest("form").attr("data-invalid",""),!1;return(o||i)&&r.trigger("valid"),r.removeAttr("data-invalid"),i?!1:!0},parse_patterns:function(t){for(var e=t.length,s=[],i=e-1;i>=0;i--)s.push(this.pattern(t[i]));return this.check_validation_and_apply_styles(s)},pattern:function(t){var e=t.getAttribute("type"),s="string"==typeof t.getAttribute("required"),i=t.getAttribute("pattern")||"";return this.settings.patterns.hasOwnProperty(i)&&i.length>0?[t,this.settings.patterns[i],s]:i.length>0?[t,new RegExp(i),s]:this.settings.patterns.hasOwnProperty(e)?[t,this.settings.patterns[e],s]:(i=/.*/,[t,i,s])},check_validation_and_apply_styles:function(e){for(var s=e.length,i=[],n=s-1;n>=0;n--){var a=e[n][0],r=e[n][2],o=a.value,l=a.getAttribute("data-equalto"),d="radio"===a.type,c="checkbox"===a.type,h=t('label[for="'+a.getAttribute("id")+'"]'),u=r?a.value.length>0:!0;d&&r?i.push(this.valid_radio(a,r)):c&&r?i.push(this.valid_checkbox(a,r)):l&&r?i.push(this.valid_equal(a,r)):e[n][1].test(o)&&u||!r&&a.value.length<1?(t(a).removeAttr("data-invalid").parent().removeClass("error"),h.length>0&&this.settings.error_labels&&h.removeClass("error"),i.push(!0)):(t(a).attr("data-invalid","").parent().addClass("error"),h.length>0&&this.settings.error_labels&&h.addClass("error"),i.push(!1))}return i},valid_checkbox:function(e,s){var e=t(e),i=e.is(":checked")||!s;return i?e.removeAttr("data-invalid").parent().removeClass("error"):e.attr("data-invalid","").parent().addClass("error"),i},valid_radio:function(e){for(var i=e.getAttribute("name"),n=s.getElementsByName(i),a=n.length,r=!1,o=0;a>o;o++)n[o].checked&&(r=!0);for(var o=0;a>o;o++)r?t(n[o]).removeAttr("data-invalid").parent().removeClass("error"):t(n[o]).attr("data-invalid","").parent().addClass("error");return r},valid_equal:function(e){var i=s.getElementById(e.getAttribute("data-equalto")).value,n=e.value,a=i===n;return a?t(e).removeAttr("data-invalid").parent().removeClass("error"):t(e).attr("data-invalid","").parent().addClass("error"),a}}}(jQuery,this,this.document),function(t){Foundation.libs.accordion={name:"accordion",version:"5.0.3",settings:{active_class:"active",toggleable:!0},init:function(t,e,s){this.bindings(e,s)},events:function(){t(this.scope).off(".accordion").on("click.fndtn.accordion","[data-accordion] > dd > a",function(e){var s=t(this).parent(),i=t("#"+this.href.split("#")[1]),n=t("> dd > .content",i.closest("[data-accordion]")),a=s.parent().data("accordion-init"),r=t("> dd > .content."+a.active_class,s.parent());return e.preventDefault(),r[0]==i[0]&&a.toggleable?i.toggleClass(a.active_class):(n.removeClass(a.active_class),i.addClass(a.active_class),void 0)})},off:function(){},reflow:function(){}}}(jQuery,this,this.document),function(t){Foundation.libs.alert={name:"alert",version:"5.0.3",settings:{animation:"fadeOut",speed:300,callback:function(){}},init:function(t,e,s){this.bindings(e,s)},events:function(){t(this.scope).off(".alert").on("click.fndtn.alert","[data-alert] a.close",function(e){var s=t(this).closest("[data-alert]"),i=s.data("alert-init")||Foundation.libs.alert.settings;e.preventDefault(),s[i.animation](i.speed,function(){t(this).trigger("closed").remove(),i.callback()})})},reflow:function(){}}}(jQuery,this,this.document),function(t,e,s,i){Foundation.libs.clearing={name:"clearing",version:"5.0.3",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" /><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div>'},close_selectors:".clearing-close",init:!1,locked:!1},init:function(e,s,i){var n=this;Foundation.inherit(this,"throttle loaded"),this.bindings(s,i),t(this.scope).is("[data-clearing]")?this.assemble(t("li",this.scope)):t("[data-clearing]",this.scope).each(function(){n.assemble(t("li",this))
})},events:function(s){var i=this;t(this.scope).off(".clearing").on("click.fndtn.clearing","ul[data-clearing] li",function(e,s,n){var s=s||t(this),n=n||s,a=s.next("li"),r=s.closest("[data-clearing]").data("clearing-init"),o=t(e.target);e.preventDefault(),r||(i.init(),r=s.closest("[data-clearing]").data("clearing-init")),n.hasClass("visible")&&s[0]===n[0]&&a.length>0&&i.is_open(s)&&(n=a,o=t("img",n)),i.open(o,s,n),i.update_paddles(n)}).on("click.fndtn.clearing",".clearing-main-next",function(t){i.nav(t,"next")}).on("click.fndtn.clearing",".clearing-main-prev",function(t){i.nav(t,"prev")}).on("click.fndtn.clearing",this.settings.close_selectors,function(t){Foundation.libs.clearing.close(t,this)}).on("keydown.fndtn.clearing",function(t){i.keydown(t)}),t(e).off(".clearing").on("resize.fndtn.clearing",function(){i.resize()}),this.swipe_events(s)},swipe_events:function(){var e=this;t(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(e){e.touches||(e=e.originalEvent);var s={start_page_x:e.touches[0].pageX,start_page_y:e.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:i};t(this).data("swipe-transition",s),e.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(s){if(s.touches||(s=s.originalEvent),!(s.touches.length>1||s.scale&&1!==s.scale)){var i=t(this).data("swipe-transition");if("undefined"==typeof i&&(i={}),i.delta_x=s.touches[0].pageX-i.start_page_x,"undefined"==typeof i.is_scrolling&&(i.is_scrolling=!!(i.is_scrolling||Math.abs(i.delta_x)<Math.abs(s.touches[0].pageY-i.start_page_y))),!i.is_scrolling&&!i.active){s.preventDefault();var n=i.delta_x<0?"next":"prev";i.active=!0,e.nav(s,n)}}}).on("touchend.fndtn.clearing",".visible-img",function(e){t(this).data("swipe-transition",{}),e.stopPropagation()})},assemble:function(e){var s=e.parent();if(!s.parent().hasClass("carousel")){s.after('<div id="foundationClearingHolder"></div>');var i=t("#foundationClearingHolder"),n=s.data("clearing-init"),a=s.detach(),r={grid:'<div class="carousel">'+a[0].outerHTML+"</div>",viewing:n.templates.viewing},o='<div class="clearing-assembled"><div>'+r.viewing+r.grid+"</div></div>";return i.after(o).remove()}},open:function(e,s,i){var n=i.closest(".clearing-assembled"),a=t("div",n).first(),r=t(".visible-img",a),o=t("img",r).not(e);this.locked()||(o.attr("src",this.load(e)).css("visibility","hidden"),this.loaded(o,function(){o.css("visibility","visible"),n.addClass("clearing-blackout"),a.addClass("clearing-container"),r.show(),this.fix_height(i).caption(t(".clearing-caption",r),e).center(o).shift(s,i,function(){i.siblings().removeClass("visible"),i.addClass("visible")})}.bind(this)))},close:function(e,s){e.preventDefault();var i,n,a=function(t){return/blackout/.test(t.selector)?t:t.closest(".clearing-blackout")}(t(s));return s===e.target&&a&&(i=t("div",a).first(),n=t(".visible-img",i),this.settings.prev_index=0,t("ul[data-clearing]",a).attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout"),i.removeClass("clearing-container"),n.hide()),!1},is_open:function(t){return t.parent().prop("style").length>0},keydown:function(e){var s=t("ul[data-clearing]",".clearing-blackout"),i=this.rtl?37:39,n=this.rtl?39:37,a=27;e.which===i&&this.go(s,"next"),e.which===n&&this.go(s,"prev"),e.which===a&&t("a.clearing-close").trigger("click")},nav:function(e,s){var i=t("ul[data-clearing]",".clearing-blackout");e.preventDefault(),this.go(i,s)},resize:function(){var e=t("img",".clearing-blackout .visible-img");e.length&&this.center(e)},fix_height:function(e){var s=e.parent().children();return s.each(function(){var e=t(this),s=e.find("img");e.height()>s.outerHeight()&&e.addClass("fix-height")}).closest("ul").width(100*s.length+"%"),this},update_paddles:function(e){var s=e.closest(".carousel").siblings(".visible-img");e.next().length>0?t(".clearing-main-next",s).removeClass("disabled"):t(".clearing-main-next",s).addClass("disabled"),e.prev().length>0?t(".clearing-main-prev",s).removeClass("disabled"):t(".clearing-main-prev",s).addClass("disabled")},center:function(t){return this.rtl?t.css({marginRight:-(t.outerWidth()/2),marginTop:-(t.outerHeight()/2),left:"auto",right:"50%"}):t.css({marginLeft:-(t.outerWidth()/2),marginTop:-(t.outerHeight()/2)}),this},load:function(t){if("A"===t[0].nodeName)var e=t.attr("href");else var e=t.parent().attr("href");return this.preload(t),e?e:t.attr("src")},preload:function(t){this.img(t.closest("li").next()).img(t.closest("li").prev())},img:function(e){if(e.length){var s=new Image,i=t("a",e);s.src=i.length?i.attr("href"):t("img",e).attr("src")}return this},caption:function(t,e){var s=e.data("caption");return s?t.html(s).show():t.text("").hide(),this},go:function(e,s){var i=t(".visible",e),n=i[s]();n.length&&t("img",n).trigger("click",[i,n])},shift:function(t,e,s){var i,n=e.parent(),a=this.settings.prev_index||e.index(),r=this.direction(n,t,e),o=this.rtl?"right":"left",l=parseInt(n.css("left"),10),d=e.outerWidth(),c={};e.index()===a||/skip/.test(r)?/skip/.test(r)&&(i=e.index()-this.settings.up_count,this.lock(),i>0?(c[o]=-(i*d),n.animate(c,300,this.unlock())):(c[o]=0,n.animate(c,300,this.unlock()))):/left/.test(r)?(this.lock(),c[o]=l+d,n.animate(c,300,this.unlock())):/right/.test(r)&&(this.lock(),c[o]=l-d,n.animate(c,300,this.unlock())),s()},direction:function(e,s,i){var n,a=t("li",e),r=a.outerWidth()+a.outerWidth()/4,o=Math.floor(t(".clearing-container").outerWidth()/r)-1,l=a.index(i);return this.settings.up_count=o,n=this.adjacent(this.settings.prev_index,l)?l>o&&l>this.settings.prev_index?"right":l>o-1&&l<=this.settings.prev_index?"left":!1:"skip",this.settings.prev_index=l,n},adjacent:function(t,e){for(var s=e+1;s>=e-1;s--)if(s===t)return!0;return!1},lock:function(){this.settings.locked=!0},unlock:function(){this.settings.locked=!1},locked:function(){return this.settings.locked},off:function(){t(this.scope).off(".fndtn.clearing"),t(e).off(".fndtn.clearing")},reflow:function(){this.init()}}}(jQuery,this,this.document),function(t,e){Foundation.libs.dropdown={name:"dropdown",version:"5.0.3",settings:{active_class:"open",is_hover:!1,opened:function(){},closed:function(){}},init:function(t,e,s){Foundation.inherit(this,"throttle"),this.bindings(e,s)},events:function(){var s=this;t(this.scope).off(".dropdown").on("click.fndtn.dropdown","[data-dropdown]",function(e){var i=t(this).data("dropdown-init")||s.settings;e.preventDefault(),s.closeall.call(s),(!i.is_hover||Modernizr.touch)&&s.toggle(t(this))}).on("mouseenter.fndtn.dropdown","[data-dropdown], [data-dropdown-content]",function(e){var i=t(this);if(clearTimeout(s.timeout),i.data("dropdown"))var n=t("#"+i.data("dropdown")),a=i;else{var n=i;a=t("[data-dropdown='"+n.attr("id")+"']")}var r=a.data("dropdown-init")||s.settings;t(e.target).data("dropdown")&&r.is_hover&&s.closeall.call(s),r.is_hover&&s.open.apply(s,[n,a])}).on("mouseleave.fndtn.dropdown","[data-dropdown], [data-dropdown-content]",function(){var e=t(this);s.timeout=setTimeout(function(){if(e.data("dropdown")){var i=e.data("dropdown-init")||s.settings;i.is_hover&&s.close.call(s,t("#"+e.data("dropdown")))}else{var n=t('[data-dropdown="'+t(this).attr("id")+'"]'),i=n.data("dropdown-init")||s.settings;i.is_hover&&s.close.call(s,e)}}.bind(this),150)}).on("click.fndtn.dropdown",function(e){var i=t(e.target).closest("[data-dropdown-content]");if(!t(e.target).data("dropdown")&&!t(e.target).parent().data("dropdown"))return!t(e.target).data("revealId")&&i.length>0&&(t(e.target).is("[data-dropdown-content]")||t.contains(i.first()[0],e.target))?(e.stopPropagation(),void 0):(s.close.call(s,t("[data-dropdown-content]")),void 0)}).on("opened.fndtn.dropdown","[data-dropdown-content]",function(){s.settings.opened.call(this)}).on("closed.fndtn.dropdown","[data-dropdown-content]",function(){s.settings.closed.call(this)}),t(e).off(".dropdown").on("resize.fndtn.dropdown",s.throttle(function(){s.resize.call(s)},50)).trigger("resize")},close:function(e){var s=this;e.each(function(){t(this).hasClass(s.settings.active_class)&&(t(this).css(Foundation.rtl?"right":"left","-99999px").removeClass(s.settings.active_class),t(this).trigger("closed"))})},closeall:function(){var e=this;t.each(t("[data-dropdown-content]"),function(){e.close.call(e,t(this))})},open:function(t,e){this.css(t.addClass(this.settings.active_class),e),t.trigger("opened")},toggle:function(e){var s=t("#"+e.data("dropdown"));0!==s.length&&(this.close.call(this,t("[data-dropdown-content]").not(s)),s.hasClass(this.settings.active_class)?this.close.call(this,s):(this.close.call(this,t("[data-dropdown-content]")),this.open.call(this,s,e)))},resize:function(){var e=t("[data-dropdown-content].open"),s=t("[data-dropdown='"+e.attr("id")+"']");e.length&&s.length&&this.css(e,s)},css:function(s,i){var n=s.offsetParent(),a=i.offset();if(a.top-=n.offset().top,a.left-=n.offset().left,this.small())s.css({position:"absolute",width:"95%","max-width":"none",top:a.top+i.outerHeight()}),s.css(Foundation.rtl?"right":"left","2.5%");else{if(!Foundation.rtl&&t(e).width()>s.outerWidth()+i.offset().left){var r=a.left;s.hasClass("right")&&s.removeClass("right")}else{s.hasClass("right")||s.addClass("right");var r=a.left-(s.outerWidth()-i.outerWidth())}s.attr("style","").css({position:"absolute",top:a.top+i.outerHeight(),left:r})}return s},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},off:function(){t(this.scope).off(".fndtn.dropdown"),t("html, body").off(".fndtn.dropdown"),t(e).off(".fndtn.dropdown"),t("[data-dropdown-content]").off(".fndtn.dropdown"),this.settings.init=!1},reflow:function(){}}}(jQuery,this,this.document),function(t,e){Foundation.libs.interchange={name:"interchange",version:"5.0.3",cache:{},images_loaded:!1,nodes_loaded:!1,settings:{load_attr:"interchange",named_queries:{"default":"only screen",small:Foundation.media_queries.small,medium:Foundation.media_queries.medium,large:Foundation.media_queries.large,xlarge:Foundation.media_queries.xlarge,xxlarge:Foundation.media_queries.xxlarge,landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx)"},directives:{replace:function(e,s,i){if(/IMG/.test(e[0].nodeName)){var n=e[0].src;if(new RegExp(s,"i").test(n))return;return e[0].src=s,i(e[0].src)}var a=e.data("interchange-last-path");if(a!=s)return t.get(s,function(t){e.html(t),e.data("interchange-last-path",s),i()})}}},init:function(e,s,i){Foundation.inherit(this,"throttle"),this.data_attr="data-"+this.settings.load_attr,t.extend(!0,this.settings,s,i),this.bindings(s,i),this.load("images"),this.load("nodes")},events:function(){var s=this;return t(e).off(".interchange").on("resize.fndtn.interchange",s.throttle(function(){s.resize.call(s)},50)),this},resize:function(){var e=this.cache;if(!this.images_loaded||!this.nodes_loaded)return setTimeout(t.proxy(this.resize,this),50),void 0;for(var s in e)if(e.hasOwnProperty(s)){var i=this.results(s,e[s]);i&&this.settings.directives[i.scenario[1]](i.el,i.scenario[0],function(){if(arguments[0]instanceof Array)var t=arguments[0];else var t=Array.prototype.slice.call(arguments,0);i.el.trigger(i.scenario[1],t)})}},results:function(t,e){var s=e.length;if(s>0)for(var i=this.S('[data-uuid="'+t+'"]'),n=s-1;n>=0;n--){var a,r=e[n][2];if(a=this.settings.named_queries.hasOwnProperty(r)?matchMedia(this.settings.named_queries[r]):matchMedia(r),a.matches)return{el:i,scenario:e[n]}}return!1},load:function(t,e){return("undefined"==typeof this["cached_"+t]||e)&&this["update_"+t](),this["cached_"+t]},update_images:function(){var t=this.S("img["+this.data_attr+"]"),e=t.length,s=0,i=this.data_attr;this.cache={},this.cached_images=[],this.images_loaded=0===e;for(var n=e-1;n>=0;n--){if(s++,t[n]){var a=t[n].getAttribute(i)||"";a.length>0&&this.cached_images.push(t[n])}s===e&&(this.images_loaded=!0,this.enhance("images"))}return this},update_nodes:function(){var t=this.S("["+this.data_attr+"]").not("img"),e=t.length,s=0,i=this.data_attr;this.cached_nodes=[],this.nodes_loaded=0===e;for(var n=e-1;n>=0;n--){s++;var a=t[n].getAttribute(i)||"";a.length>0&&this.cached_nodes.push(t[n]),s===e&&(this.nodes_loaded=!0,this.enhance("nodes"))}return this},enhance:function(s){for(var i=this["cached_"+s].length,n=i-1;n>=0;n--)this.object(t(this["cached_"+s][n]));return t(e).trigger("resize")},parse_params:function(t,e,s){return[this.trim(t),this.convert_directive(e),this.trim(s)]},convert_directive:function(t){var e=this.trim(t);return e.length>0?e:"replace"},object:function(t){var e=this.parse_data_attr(t),s=[],i=e.length;if(i>0)for(var n=i-1;n>=0;n--){var a=e[n].split(/\((.*?)(\))$/);if(a.length>1){var r=a[0].split(","),o=this.parse_params(r[0],r[1],a[1]);s.push(o)}}return this.store(t,s)},uuid:function(t){function e(){return(0|65536*(1+Math.random())).toString(16).substring(1)}var s=t||"-";return e()+e()+s+e()+s+e()+s+e()+s+e()+e()+e()},store:function(t,e){var s=this.uuid(),i=t.data("uuid");return this.cache[i]?this.cache[i]:(t.attr("data-uuid",s),this.cache[s]=e)},trim:function(e){return"string"==typeof e?t.trim(e):e},parse_data_attr:function(t){for(var e=t.data(this.settings.load_attr).split(/\[(.*?)\]/),s=e.length,i=[],n=s-1;n>=0;n--)e[n].replace(/[\W\d]+/,"").length>4&&i.push(e[n]);return i},reflow:function(){this.load("images",!0),this.load("nodes",!0)}}}(jQuery,this,this.document),function(t,e,s,i){Foundation.libs.joyride={name:"joyride",version:"5.0.3",defaults:{expose:!1,modal:!0,tip_location:"bottom",nub_position:"auto",scroll_speed:1500,scroll_animation:"linear",timer:0,start_timer_on_click:!0,start_offset:0,next_button:!0,tip_animation:"fade",pause_after:[],exposed:[],tip_animation_fade_speed:300,cookie_monster:!1,cookie_name:"joyride",cookie_domain:!1,cookie_expires:365,tip_container:"body",tip_location_patterns:{top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]},post_ride_callback:function(){},post_step_callback:function(){},pre_step_callback:function(){},pre_ride_callback:function(){},post_expose_callback:function(){},template:{link:'<a href="#close" class="joyride-close-tip">&times;</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper"></div>',button:'<a href="#" class="small button joyride-next-tip"></a>',modal:'<div class="joyride-modal-bg"></div>',expose:'<div class="joyride-expose-wrapper"></div>',expose_cover:'<div class="joyride-expose-cover"></div>'},expose_add_class:""},init:function(t,e,s){Foundation.inherit(this,"throttle delay"),this.settings=this.defaults,this.bindings(e,s)},events:function(){var s=this;t(this.scope).off(".joyride").on("click.fndtn.joyride",".joyride-next-tip, .joyride-modal-bg",function(t){t.preventDefault(),this.settings.$li.next().length<1?this.end():this.settings.timer>0?(clearTimeout(this.settings.automate),this.hide(),this.show(),this.startTimer()):(this.hide(),this.show())}.bind(this)).on("click.fndtn.joyride",".joyride-close-tip",function(t){t.preventDefault(),this.end()}.bind(this)),t(e).off(".joyride").on("resize.fndtn.joyride",s.throttle(function(){if(t("[data-joyride]").length>0&&s.settings.$next_tip){if(s.settings.exposed.length>0){var e=t(s.settings.exposed);e.each(function(){var e=t(this);s.un_expose(e),s.expose(e)})}s.is_phone()?s.pos_phone():s.pos_default(!1,!0)}},100))},start:function(){var e=this,s=t("[data-joyride]",this.scope),i=["timer","scrollSpeed","startOffset","tipAnimationFadeSpeed","cookieExpires"],n=i.length;!s.length>0||(this.settings.init||this.events(),this.settings=s.data("joyride-init"),this.settings.$content_el=s,this.settings.$body=t(this.settings.tip_container),this.settings.body_offset=t(this.settings.tip_container).position(),this.settings.$tip_content=this.settings.$content_el.find("> li"),this.settings.paused=!1,this.settings.attempts=0,"function"!=typeof t.cookie&&(this.settings.cookie_monster=!1),(!this.settings.cookie_monster||this.settings.cookie_monster&&!t.cookie(this.settings.cookie_name))&&(this.settings.$tip_content.each(function(s){var a=t(this);this.settings=t.extend({},e.defaults,e.data_options(a));for(var r=n-1;r>=0;r--)e.settings[i[r]]=parseInt(e.settings[i[r]],10);e.create({$li:a,index:s})}),!this.settings.start_timer_on_click&&this.settings.timer>0?(this.show("init"),this.startTimer()):this.show("init")))},resume:function(){this.set_li(),this.show()},tip_template:function(e){var s,i;return e.tip_class=e.tip_class||"",s=t(this.settings.template.tip).addClass(e.tip_class),i=t.trim(t(e.li).html())+this.button_text(e.button_text)+this.settings.template.link+this.timer_instance(e.index),s.append(t(this.settings.template.wrapper)),s.first().attr("data-index",e.index),t(".joyride-content-wrapper",s).append(i),s[0]},timer_instance:function(e){var s;return s=0===e&&this.settings.start_timer_on_click&&this.settings.timer>0||0===this.settings.timer?"":t(this.settings.template.timer)[0].outerHTML},button_text:function(e){return this.settings.next_button?(e=t.trim(e)||"Next",e=t(this.settings.template.button).append(e)[0].outerHTML):e="",e},create:function(e){var s=e.$li.attr("data-button")||e.$li.attr("data-text"),i=e.$li.attr("class"),n=t(this.tip_template({tip_class:i,index:e.index,button_text:s,li:e.$li}));t(this.settings.tip_container).append(n)},show:function(e){var s=null;this.settings.$li===i||-1===t.inArray(this.settings.$li.index(),this.settings.pause_after)?(this.settings.paused?this.settings.paused=!1:this.set_li(e),this.settings.attempts=0,this.settings.$li.length&&this.settings.$target.length>0?(e&&(this.settings.pre_ride_callback(this.settings.$li.index(),this.settings.$next_tip),this.settings.modal&&this.show_modal()),this.settings.pre_step_callback(this.settings.$li.index(),this.settings.$next_tip),this.settings.modal&&this.settings.expose&&this.expose(),this.settings.tip_settings=t.extend({},this.settings,this.data_options(this.settings.$li)),this.settings.timer=parseInt(this.settings.timer,10),this.settings.tip_settings.tip_location_pattern=this.settings.tip_location_patterns[this.settings.tip_settings.tip_location],/body/i.test(this.settings.$target.selector)||this.scroll_to(),this.is_phone()?this.pos_phone(!0):this.pos_default(!0),s=this.settings.$next_tip.find(".joyride-timer-indicator"),/pop/i.test(this.settings.tip_animation)?(s.width(0),this.settings.timer>0?(this.settings.$next_tip.show(),this.delay(function(){s.animate({width:s.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tip_animation_fade_speed)):this.settings.$next_tip.show()):/fade/i.test(this.settings.tip_animation)&&(s.width(0),this.settings.timer>0?(this.settings.$next_tip.fadeIn(this.settings.tip_animation_fade_speed).show(),this.delay(function(){s.animate({width:s.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tip_animation_fadeSpeed)):this.settings.$next_tip.fadeIn(this.settings.tip_animation_fade_speed)),this.settings.$current_tip=this.settings.$next_tip):this.settings.$li&&this.settings.$target.length<1?this.show():this.end()):this.settings.paused=!0},is_phone:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},hide:function(){this.settings.modal&&this.settings.expose&&this.un_expose(),this.settings.modal||t(".joyride-modal-bg").hide(),this.settings.$current_tip.css("visibility","hidden"),setTimeout(t.proxy(function(){this.hide(),this.css("visibility","visible")},this.settings.$current_tip),0),this.settings.post_step_callback(this.settings.$li.index(),this.settings.$current_tip)},set_li:function(t){t?(this.settings.$li=this.settings.$tip_content.eq(this.settings.start_offset),this.set_next_tip(),this.settings.$current_tip=this.settings.$next_tip):(this.settings.$li=this.settings.$li.next(),this.set_next_tip()),this.set_target()},set_next_tip:function(){this.settings.$next_tip=t(".joyride-tip-guide").eq(this.settings.$li.index()),this.settings.$next_tip.data("closed","")},set_target:function(){var e=this.settings.$li.attr("data-class"),i=this.settings.$li.attr("data-id"),n=function(){return i?t(s.getElementById(i)):e?t("."+e).first():t("body")};this.settings.$target=n()},scroll_to:function(){var s,i;s=t(e).height()/2,i=Math.ceil(this.settings.$target.offset().top-s+this.settings.$next_tip.outerHeight()),0!=i&&t("html, body").animate({scrollTop:i},this.settings.scroll_speed,"swing")},paused:function(){return-1===t.inArray(this.settings.$li.index()+1,this.settings.pause_after)},restart:function(){this.hide(),this.settings.$li=i,this.show("init")},pos_default:function(s,i){var n=(Math.ceil(t(e).height()/2),this.settings.$next_tip.offset(),this.settings.$next_tip.find(".joyride-nub")),a=Math.ceil(n.outerWidth()/2),r=Math.ceil(n.outerHeight()/2),o=s||!1;o&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show()),"undefined"==typeof i&&(i=!1),/body/i.test(this.settings.$target.selector)?this.settings.$li.length&&this.pos_modal(n):(this.bottom()?(this.rtl?this.settings.$next_tip.css({top:this.settings.$target.offset().top+r+this.settings.$target.outerHeight(),left:this.settings.$target.offset().left+this.settings.$target.outerWidth()-this.settings.$next_tip.outerWidth()}):this.settings.$next_tip.css({top:this.settings.$target.offset().top+r+this.settings.$target.outerHeight(),left:this.settings.$target.offset().left}),this.nub_position(n,this.settings.tip_settings.nub_position,"top")):this.top()?(this.rtl?this.settings.$next_tip.css({top:this.settings.$target.offset().top-this.settings.$next_tip.outerHeight()-r,left:this.settings.$target.offset().left+this.settings.$target.outerWidth()-this.settings.$next_tip.outerWidth()}):this.settings.$next_tip.css({top:this.settings.$target.offset().top-this.settings.$next_tip.outerHeight()-r,left:this.settings.$target.offset().left}),this.nub_position(n,this.settings.tip_settings.nub_position,"bottom")):this.right()?(this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:this.outerWidth(this.settings.$target)+this.settings.$target.offset().left+a}),this.nub_position(n,this.settings.tip_settings.nub_position,"left")):this.left()&&(this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:this.settings.$target.offset().left-this.outerWidth(this.settings.$next_tip)-a}),this.nub_position(n,this.settings.tip_settings.nub_position,"right")),!this.visible(this.corners(this.settings.$next_tip))&&this.settings.attempts<this.settings.tip_settings.tip_location_pattern.length&&(n.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),this.settings.tip_settings.tip_location=this.settings.tip_settings.tip_location_pattern[this.settings.attempts],this.settings.attempts++,this.pos_default())),o&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_phone:function(e){var s=this.settings.$next_tip.outerHeight(),i=(this.settings.$next_tip.offset(),this.settings.$target.outerHeight()),n=t(".joyride-nub",this.settings.$next_tip),a=Math.ceil(n.outerHeight()/2),r=e||!1;n.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),r&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show()),/body/i.test(this.settings.$target.selector)?this.settings.$li.length&&this.pos_modal(n):this.top()?(this.settings.$next_tip.offset({top:this.settings.$target.offset().top-s-a}),n.addClass("bottom")):(this.settings.$next_tip.offset({top:this.settings.$target.offset().top+i+a}),n.addClass("top")),r&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_modal:function(t){this.center(),t.hide(),this.show_modal()},show_modal:function(){if(!this.settings.$next_tip.data("closed")){var e=t(".joyride-modal-bg");e.length<1&&t("body").append(this.settings.template.modal).show(),/pop/i.test(this.settings.tip_animation)?e.show():e.fadeIn(this.settings.tip_animation_fade_speed)}},expose:function(){var s,i,n,a,r,o="expose-"+Math.floor(1e4*Math.random());if(arguments.length>0&&arguments[0]instanceof t)n=arguments[0];else{if(!this.settings.$target||/body/i.test(this.settings.$target.selector))return!1;n=this.settings.$target}return n.length<1?(e.console&&console.error("element not valid",n),!1):(s=t(this.settings.template.expose),this.settings.$body.append(s),s.css({top:n.offset().top,left:n.offset().left,width:n.outerWidth(!0),height:n.outerHeight(!0)}),i=t(this.settings.template.expose_cover),a={zIndex:n.css("z-index"),position:n.css("position")},r=null==n.attr("class")?"":n.attr("class"),n.css("z-index",parseInt(s.css("z-index"))+1),"static"==a.position&&n.css("position","relative"),n.data("expose-css",a),n.data("orig-class",r),n.attr("class",r+" "+this.settings.expose_add_class),i.css({top:n.offset().top,left:n.offset().left,width:n.outerWidth(!0),height:n.outerHeight(!0)}),this.settings.modal&&this.show_modal(),this.settings.$body.append(i),s.addClass(o),i.addClass(o),n.data("expose",o),this.settings.post_expose_callback(this.settings.$li.index(),this.settings.$next_tip,n),this.add_exposed(n),void 0)},un_expose:function(){var s,i,n,a,r,o=!1;if(arguments.length>0&&arguments[0]instanceof t)i=arguments[0];else{if(!this.settings.$target||/body/i.test(this.settings.$target.selector))return!1;i=this.settings.$target}return i.length<1?(e.console&&console.error("element not valid",i),!1):(s=i.data("expose"),n=t("."+s),arguments.length>1&&(o=arguments[1]),o===!0?t(".joyride-expose-wrapper,.joyride-expose-cover").remove():n.remove(),a=i.data("expose-css"),"auto"==a.zIndex?i.css("z-index",""):i.css("z-index",a.zIndex),a.position!=i.css("position")&&("static"==a.position?i.css("position",""):i.css("position",a.position)),r=i.data("orig-class"),i.attr("class",r),i.removeData("orig-classes"),i.removeData("expose"),i.removeData("expose-z-index"),this.remove_exposed(i),void 0)},add_exposed:function(e){this.settings.exposed=this.settings.exposed||[],e instanceof t||"object"==typeof e?this.settings.exposed.push(e[0]):"string"==typeof e&&this.settings.exposed.push(e)},remove_exposed:function(e){var s,i;e instanceof t?s=e[0]:"string"==typeof e&&(s=e),this.settings.exposed=this.settings.exposed||[],i=this.settings.exposed.length;for(var n=0;i>n;n++)if(this.settings.exposed[n]==s)return this.settings.exposed.splice(n,1),void 0},center:function(){var s=t(e);return this.settings.$next_tip.css({top:(s.height()-this.settings.$next_tip.outerHeight())/2+s.scrollTop(),left:(s.width()-this.settings.$next_tip.outerWidth())/2+s.scrollLeft()}),!0},bottom:function(){return/bottom/i.test(this.settings.tip_settings.tip_location)},top:function(){return/top/i.test(this.settings.tip_settings.tip_location)},right:function(){return/right/i.test(this.settings.tip_settings.tip_location)},left:function(){return/left/i.test(this.settings.tip_settings.tip_location)},corners:function(s){var i=t(e),n=i.height()/2,a=Math.ceil(this.settings.$target.offset().top-n+this.settings.$next_tip.outerHeight()),r=i.width()+i.scrollLeft(),o=i.height()+a,l=i.height()+i.scrollTop(),d=i.scrollTop();return d>a&&(d=0>a?0:a),o>l&&(l=o),[s.offset().top<d,r<s.offset().left+s.outerWidth(),l<s.offset().top+s.outerHeight(),i.scrollLeft()>s.offset().left]},visible:function(t){for(var e=t.length;e--;)if(t[e])return!1;return!0},nub_position:function(t,e,s){"auto"===e?t.addClass(s):t.addClass(e)},startTimer:function(){this.settings.$li.length?this.settings.automate=setTimeout(function(){this.hide(),this.show(),this.startTimer()}.bind(this),this.settings.timer):clearTimeout(this.settings.automate)},end:function(){this.settings.cookie_monster&&t.cookie(this.settings.cookie_name,"ridden",{expires:this.settings.cookie_expires,domain:this.settings.cookie_domain}),this.settings.timer>0&&clearTimeout(this.settings.automate),this.settings.modal&&this.settings.expose&&this.un_expose(),this.settings.$next_tip.data("closed",!0),t(".joyride-modal-bg").hide(),this.settings.$current_tip.hide(),this.settings.post_step_callback(this.settings.$li.index(),this.settings.$current_tip),this.settings.post_ride_callback(this.settings.$li.index(),this.settings.$current_tip),t(".joyride-tip-guide").remove()},off:function(){t(this.scope).off(".joyride"),t(e).off(".joyride"),t(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride"),t(".joyride-tip-guide, .joyride-modal-bg").remove(),clearTimeout(this.settings.automate),this.settings={}},reflow:function(){}}}(jQuery,this,this.document),function(t,e){Foundation.libs.magellan={name:"magellan",version:"5.0.3",settings:{active_class:"active",threshold:0},init:function(e,s){this.fixed_magellan=t("[data-magellan-expedition]"),this.magellan_placeholder=t("<div></div>").css({height:this.fixed_magellan.outerHeight(!0)}).hide().insertAfter(this.fixed_magellan),this.set_threshold(),this.set_active_class(s),this.last_destination=t("[data-magellan-destination]").last(),this.events()},events:function(){var s=this;t(this.scope).off(".magellan").on("arrival.fndtn.magellan","[data-magellan-arrival]",function(){var e=t(this),i=e.closest("[data-magellan-expedition]"),n=i.attr("data-magellan-active-class")||s.settings.active_class;e.closest("[data-magellan-expedition]").find("[data-magellan-arrival]").not(e).removeClass(n),e.addClass(n)}),this.fixed_magellan.off(".magellan").on("update-position.fndtn.magellan",function(){t(this)}).trigger("update-position"),t(e).off(".magellan").on("resize.fndtn.magellan",function(){this.fixed_magellan.trigger("update-position")}.bind(this)).on("scroll.fndtn.magellan",function(){var i=t(e).scrollTop();s.fixed_magellan.each(function(){var e=t(this);"undefined"==typeof e.data("magellan-top-offset")&&e.data("magellan-top-offset",e.offset().top),"undefined"==typeof e.data("magellan-fixed-position")&&e.data("magellan-fixed-position",!1);var n=i+s.settings.threshold>e.data("magellan-top-offset"),a=e.attr("data-magellan-top-offset");e.data("magellan-fixed-position")!=n&&(e.data("magellan-fixed-position",n),n?(e.addClass("fixed"),e.css({position:"fixed",top:0}),s.magellan_placeholder.show()):(e.removeClass("fixed"),e.css({position:"",top:""}),s.magellan_placeholder.hide()),n&&"undefined"!=typeof a&&0!=a&&e.css({position:"fixed",top:a+"px"}))})}),this.last_destination.length>0&&t(e).on("scroll.fndtn.magellan",function(){var i=t(e).scrollTop(),n=i+t(e).height(),a=Math.ceil(s.last_destination.offset().top);t("[data-magellan-destination]").each(function(){var e=t(this),r=e.attr("data-magellan-destination"),o=e.offset().top-e.outerHeight(!0)-i;o<=s.settings.threshold&&t("[data-magellan-arrival='"+r+"']").trigger("arrival"),n>=t(s.scope).height()&&a>i&&n>a&&t("[data-magellan-arrival]").last().trigger("arrival")})})},set_threshold:function(){"number"!=typeof this.settings.threshold&&(this.settings.threshold=this.fixed_magellan.length>0?this.fixed_magellan.outerHeight(!0):0)},set_active_class:function(t){t&&t.active_class&&"string"==typeof t.active_class&&(this.settings.active_class=t.active_class)},off:function(){t(this.scope).off(".fndtn.magellan"),t(e).off(".fndtn.magellan")},reflow:function(){}}}(jQuery,this,this.document),function(t){Foundation.libs.offcanvas={name:"offcanvas",version:"5.0.3",settings:{},init:function(){this.events()},events:function(){t(this.scope).off(".offcanvas").on("click.fndtn.offcanvas",".left-off-canvas-toggle",function(e){e.preventDefault(),t(this).closest(".off-canvas-wrap").toggleClass("move-right")}).on("click.fndtn.offcanvas",".exit-off-canvas",function(e){e.preventDefault(),t(".off-canvas-wrap").removeClass("move-right")}).on("click.fndtn.offcanvas",".right-off-canvas-toggle",function(e){e.preventDefault(),t(this).closest(".off-canvas-wrap").toggleClass("move-left")}).on("click.fndtn.offcanvas",".exit-off-canvas",function(e){e.preventDefault(),t(".off-canvas-wrap").removeClass("move-left")})},reflow:function(){}}}(jQuery,this,this.document),function(t,e,s,i){var n=function(){},a=function(n,a){if(n.hasClass(a.slides_container_class))return this;var d,c,h,u,_,p,f=this,g=n,m=0,v=!1;g.children().first().addClass(a.active_slide_class),f.update_slide_number=function(e){a.slide_number&&(c.find("span:first").text(parseInt(e)+1),c.find("span:last").text(g.children().length)),a.bullets&&(h.children().removeClass(a.bullets_active_class),t(h.children().get(e)).addClass(a.bullets_active_class))},f.update_active_link=function(e){var s=t('a[data-orbit-link="'+g.children().eq(e).attr("data-orbit-slide")+'"]');
s.siblings().removeClass(a.bullets_active_class),s.addClass(a.bullets_active_class)},f.build_markup=function(){g.wrap('<div class="'+a.container_class+'"></div>'),d=g.parent(),g.addClass(a.slides_container_class),a.navigation_arrows&&(d.append(t('<a href="#"><span></span></a>').addClass(a.prev_class)),d.append(t('<a href="#"><span></span></a>').addClass(a.next_class))),a.timer&&(u=t("<div>").addClass(a.timer_container_class),u.append("<span>"),u.append(t("<div>").addClass(a.timer_progress_class)),u.addClass(a.timer_paused_class),d.append(u)),a.slide_number&&(c=t("<div>").addClass(a.slide_number_class),c.append("<span></span> "+a.slide_number_text+" <span></span>"),d.append(c)),a.bullets&&(h=t("<ol>").addClass(a.bullets_container_class),d.append(h),h.wrap('<div class="orbit-bullets-container"></div>'),g.children().each(function(e){var s=t("<li>").attr("data-orbit-slide",e);h.append(s)})),a.stack_on_small&&d.addClass(a.stack_on_small_class),f.update_slide_number(0),f.update_active_link(0)},f._goto=function(e,s){if(e===m)return!1;"object"==typeof p&&p.restart();var i=g.children(),n="next";if(v=!0,m>e&&(n="prev"),e>=i.length){if(!a.circular)return!1;e=0}else if(0>e){if(!a.circular)return!1;e=i.length-1}var r=t(i.get(m)),o=t(i.get(e));r.css("zIndex",2),r.removeClass(a.active_slide_class),o.css("zIndex",4).addClass(a.active_slide_class),g.trigger("before-slide-change.fndtn.orbit"),a.before_slide_change(),f.update_active_link(e);var l=function(){var t=function(){m=e,v=!1,s===!0&&(p=f.create_timer(),p.start()),f.update_slide_number(m),g.trigger("after-slide-change.fndtn.orbit",[{slide_number:m,total_slides:i.length}]),a.after_slide_change(m,i.length)};g.height()!=o.height()&&a.variable_height?g.animate({height:o.height()},250,"linear",t):t()};if(1===i.length)return l(),!1;var d=function(){"next"===n&&_.next(r,o,l),"prev"===n&&_.prev(r,o,l)};o.height()>g.height()&&a.variable_height?g.animate({height:o.height()},250,"linear",d):d()},f.next=function(t){t.stopImmediatePropagation(),t.preventDefault(),f._goto(m+1)},f.prev=function(t){t.stopImmediatePropagation(),t.preventDefault(),f._goto(m-1)},f.link_custom=function(e){e.preventDefault();var s=t(this).attr("data-orbit-link");if("string"==typeof s&&""!=(s=t.trim(s))){var i=d.find("[data-orbit-slide="+s+"]");-1!=i.index()&&f._goto(i.index())}},f.link_bullet=function(){var e=t(this).attr("data-orbit-slide");if("string"==typeof e&&""!=(e=t.trim(e)))if(isNaN(parseInt(e))){var s=d.find("[data-orbit-slide="+e+"]");-1!=s.index()&&f._goto(s.index()+1)}else f._goto(parseInt(e))},f.timer_callback=function(){f._goto(m+1,!0)},f.compute_dimensions=function(){var e=t(g.children().get(m)),s=e.height();a.variable_height||g.children().each(function(){t(this).height()>s&&(s=t(this).height())}),g.height(s)},f.create_timer=function(){var t=new r(d.find("."+a.timer_container_class),a,f.timer_callback);return t},f.stop_timer=function(){"object"==typeof p&&p.stop()},f.toggle_timer=function(){var t=d.find("."+a.timer_container_class);t.hasClass(a.timer_paused_class)?("undefined"==typeof p&&(p=f.create_timer()),p.start()):"object"==typeof p&&p.stop()},f.init=function(){f.build_markup(),a.timer&&(p=f.create_timer(),p.start()),_=new l(a,g),"slide"===a.animation&&(_=new o(a,g)),d.on("click","."+a.next_class,f.next),d.on("click","."+a.prev_class,f.prev),d.on("click","[data-orbit-slide]",f.link_bullet),d.on("click",f.toggle_timer),a.swipe&&d.on("touchstart.fndtn.orbit",function(t){t.touches||(t=t.originalEvent);var e={start_page_x:t.touches[0].pageX,start_page_y:t.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:i};d.data("swipe-transition",e),t.stopPropagation()}).on("touchmove.fndtn.orbit",function(t){if(t.touches||(t=t.originalEvent),!(t.touches.length>1||t.scale&&1!==t.scale)){var e=d.data("swipe-transition");if("undefined"==typeof e&&(e={}),e.delta_x=t.touches[0].pageX-e.start_page_x,"undefined"==typeof e.is_scrolling&&(e.is_scrolling=!!(e.is_scrolling||Math.abs(e.delta_x)<Math.abs(t.touches[0].pageY-e.start_page_y))),!e.is_scrolling&&!e.active){t.preventDefault();var s=e.delta_x<0?m+1:m-1;e.active=!0,f._goto(s)}}}).on("touchend.fndtn.orbit",function(t){d.data("swipe-transition",{}),t.stopPropagation()}),d.on("mouseenter.fndtn.orbit",function(){a.timer&&a.pause_on_hover&&f.stop_timer()}).on("mouseleave.fndtn.orbit",function(){a.timer&&a.resume_on_mouseout&&p.start()}),t(s).on("click","[data-orbit-link]",f.link_custom),t(e).on("resize",f.compute_dimensions),t(e).on("load",f.compute_dimensions),t(e).on("load",function(){d.prev(".preloader").css("display","none")}),g.trigger("ready.fndtn.orbit")},f.init()},r=function(t,e,s){var i,n,a=this,r=e.timer_speed,o=t.find("."+e.timer_progress_class),l=-1;this.update_progress=function(t){var e=o.clone();e.attr("style",""),e.css("width",t+"%"),o.replaceWith(e),o=e},this.restart=function(){clearTimeout(n),t.addClass(e.timer_paused_class),l=-1,a.update_progress(0)},this.start=function(){return t.hasClass(e.timer_paused_class)?(l=-1===l?r:l,t.removeClass(e.timer_paused_class),i=(new Date).getTime(),o.animate({width:"100%"},l,"linear"),n=setTimeout(function(){a.restart(),s()},l),t.trigger("timer-started.fndtn.orbit"),void 0):!0},this.stop=function(){if(t.hasClass(e.timer_paused_class))return!0;clearTimeout(n),t.addClass(e.timer_paused_class);var s=(new Date).getTime();l-=s-i;var o=100-100*(l/r);a.update_progress(o),t.trigger("timer-stopped.fndtn.orbit")}},o=function(e){var s=e.animation_speed,i=1===t("html[dir=rtl]").length,n=i?"marginRight":"marginLeft",a={};a[n]="0%",this.next=function(t,e,i){t.animate({marginLeft:"-100%"},s),e.animate(a,s,function(){t.css(n,"100%"),i()})},this.prev=function(t,e,i){t.animate({marginLeft:"100%"},s),e.css(n,"-100%"),e.animate(a,s,function(){t.css(n,"100%"),i()})}},l=function(e){var s=e.animation_speed;1===t("html[dir=rtl]").length,this.next=function(t,e,i){e.css({margin:"0%",opacity:"0.01"}),e.animate({opacity:"1"},s,"linear",function(){t.css("margin","100%"),i()})},this.prev=function(t,e,i){e.css({margin:"0%",opacity:"0.01"}),e.animate({opacity:"1"},s,"linear",function(){t.css("margin","100%"),i()})}};Foundation.libs=Foundation.libs||{},Foundation.libs.orbit={name:"orbit",version:"5.0.3",settings:{animation:"slide",timer_speed:1e4,pause_on_hover:!0,resume_on_mouseout:!1,animation_speed:500,stack_on_small:!1,navigation_arrows:!0,slide_number:!0,slide_number_text:"of",container_class:"orbit-container",stack_on_small_class:"orbit-stack-on-small",next_class:"orbit-next",prev_class:"orbit-prev",timer_container_class:"orbit-timer",timer_paused_class:"paused",timer_progress_class:"orbit-progress",slides_container_class:"orbit-slides-container",bullets_container_class:"orbit-bullets",bullets_active_class:"active",slide_number_class:"orbit-slide-number",caption_class:"orbit-caption",active_slide_class:"active",orbit_transition_class:"orbit-transitioning",bullets:!0,circular:!0,timer:!0,variable_height:!1,swipe:!0,before_slide_change:n,after_slide_change:n},init:function(t,e,s){this.bindings(e,s)},events:function(e){var s=new a(t(e),t(e).data("orbit-init"));t(e).data(self.name+"-instance",s)},reflow:function(){var e=this;if(t(e.scope).is("[data-orbit]")){var s=t(e.scope),i=s.data(e.name+"-instance");i.compute_dimensions()}else t("[data-orbit]",e.scope).each(function(s,i){var n=t(i);e.data_options(n);var a=n.data(e.name+"-instance");a.compute_dimensions()})}}}(jQuery,this,this.document),function(t,e,s,i){Foundation.libs.reveal={name:"reveal",version:"5.0.3",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:t(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(e,s,i){Foundation.inherit(this,"delay"),t.extend(!0,this.settings,s,i),this.bindings(s,i)},events:function(){var e=this;return t("[data-reveal-id]",this.scope).off(".reveal").on("click.fndtn.reveal",function(s){if(s.preventDefault(),!e.locked){var i=t(this),n=i.data("reveal-ajax");if(e.locked=!0,"undefined"==typeof n)e.open.call(e,i);else{var a=n===!0?i.attr("href"):n;e.open.call(e,i,{url:a})}}}),t(this.scope).off(".reveal"),t(s).on("click.fndtn.reveal",this.close_targets(),function(s){if(s.preventDefault(),!e.locked){var i=t("[data-reveal].open").data("reveal-init"),n=t(s.target)[0]===t("."+i.bg_class)[0];if(n&&!i.close_on_background_click)return;e.locked=!0,e.close.call(e,n?t("[data-reveal].open"):t(this).closest("[data-reveal]"))}}),t("[data-reveal]",this.scope).length>0?t(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):t(this.scope).on("open.fndtn.reveal","[data-reveal]",this.settings.open).on("opened.fndtn.reveal","[data-reveal]",this.settings.opened).on("opened.fndtn.reveal","[data-reveal]",this.open_video).on("close.fndtn.reveal","[data-reveal]",this.settings.close).on("closed.fndtn.reveal","[data-reveal]",this.settings.closed).on("closed.fndtn.reveal","[data-reveal]",this.close_video),!0},key_up_on:function(){var e=this;return t("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(s){var i=t("[data-reveal].open"),n=i.data("reveal-init");n&&27===s.which&&n.close_on_esc&&!e.locked&&e.close.call(e,i)}),!0},key_up_off:function(){return t("body").off("keyup.fndtn.reveal"),!0},open:function(e,s){var i=this;if(e)if("undefined"!=typeof e.selector)var n=t("#"+e.data("reveal-id"));else{var n=t(this.scope);s=e}else var n=t(this.scope);var a=n.data("reveal-init");if(!n.hasClass("open")){var r=t("[data-reveal].open");if("undefined"==typeof n.data("css-top")&&n.data("css-top",parseInt(n.css("top"),10)).data("offset",this.cache_offset(n)),this.key_up_on(n),n.trigger("open"),r.length<1&&this.toggle_bg(n),"string"==typeof s&&(s={url:s}),"undefined"!=typeof s&&s.url){var o="undefined"!=typeof s.success?s.success:null;t.extend(s,{success:function(e,s,l){if(t.isFunction(o)&&o(e,s,l),n.html(e),t(n).foundation("section","reflow"),r.length>0){var d=r.data("reveal-init");i.hide(r,d.css.close)}i.show(n,a.css.open)}}),t.ajax(s)}else{if(r.length>0){var l=r.data("reveal-init");this.hide(r,l.css.close)}this.show(n,a.css.open)}}},close:function(e){var e=e&&e.length?e:t(this.scope),s=t("[data-reveal].open"),i=e.data("reveal-init");s.length>0&&(this.locked=!0,this.key_up_off(e),e.trigger("close"),this.toggle_bg(e),this.hide(s,i.css.close,i))},close_targets:function(){var t="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?t+", ."+this.settings.bg_class:t},toggle_bg:function(e){e.data("reveal-init"),0===t("."+this.settings.bg_class).length&&(this.settings.bg=t("<div />",{"class":this.settings.bg_class}).appendTo("body")),this.settings.bg.filter(":visible").length>0?this.hide(this.settings.bg):this.show(this.settings.bg)},show:function(s,i){if(i){var n=s.data("reveal-init");if(0===s.parent("body").length){var a=s.wrap('<div style="display: none;" />').parent(),r=this.settings.rootElement||"body";s.on("closed.fndtn.reveal.wrapped",function(){s.detach().appendTo(a),s.unwrap().unbind("closed.fndtn.reveal.wrapped")}),s.detach().appendTo(r)}if(/pop/i.test(n.animation)){i.top=t(e).scrollTop()-s.data("offset")+"px";var o={top:t(e).scrollTop()+s.data("css-top")+"px",opacity:1};return this.delay(function(){return s.css(i).animate(o,n.animation_speed,"linear",function(){this.locked=!1,s.trigger("opened")}.bind(this)).addClass("open")}.bind(this),n.animation_speed/2)}if(/fade/i.test(n.animation)){var o={opacity:1};return this.delay(function(){return s.css(i).animate(o,n.animation_speed,"linear",function(){this.locked=!1,s.trigger("opened")}.bind(this)).addClass("open")}.bind(this),n.animation_speed/2)}return s.css(i).show().css({opacity:1}).addClass("open").trigger("opened")}var n=this.settings;return/fade/i.test(n.animation)?s.fadeIn(n.animation_speed/2):s.show()},hide:function(s,i){if(i){var n=s.data("reveal-init");if(/pop/i.test(n.animation)){var a={top:-t(e).scrollTop()-s.data("offset")+"px",opacity:0};return this.delay(function(){return s.animate(a,n.animation_speed,"linear",function(){this.locked=!1,s.css(i).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),n.animation_speed/2)}if(/fade/i.test(n.animation)){var a={opacity:0};return this.delay(function(){return s.animate(a,n.animation_speed,"linear",function(){this.locked=!1,s.css(i).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),n.animation_speed/2)}return s.hide().css(i).removeClass("open").trigger("closed")}var n=this.settings;return/fade/i.test(n.animation)?s.fadeOut(n.animation_speed/2):s.hide()},close_video:function(){var e=t(this).find(".flex-video"),s=e.find("iframe");s.length>0&&(s.attr("data-src",s[0].src),s.attr("src","about:blank"),e.hide())},open_video:function(){var e=t(this).find(".flex-video"),s=e.find("iframe");if(s.length>0){var n=s.attr("data-src");if("string"==typeof n)s[0].src=s.attr("data-src");else{var a=s[0].src;s[0].src=i,s[0].src=a}e.show()}},cache_offset:function(t){var e=t.show().height()+parseInt(t.css("top"),10);return t.hide(),e},off:function(){t(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,this,this.document),function(t){Foundation.libs.tab={name:"tab",version:"5.0.3",settings:{active_class:"active",callback:function(){}},init:function(t,e,s){this.bindings(e,s)},events:function(){t(this.scope).off(".tab").on("click.fndtn.tab","[data-tab] > dd > a",function(e){e.preventDefault();var s=t(this).parent(),i=s.closest("[data-tab]"),n=t("#"+this.href.split("#")[1]),a=s.siblings(),r=i.data("tab-init");t(this).data("tab-content")&&(n=t("#"+t(this).data("tab-content").split("#")[1])),s.addClass(r.active_class).trigger("opened"),a.removeClass(r.active_class),n.siblings().removeClass(r.active_class).end().addClass(r.active_class),r.callback(s),i.trigger("toggled",[s])})},off:function(){},reflow:function(){}}}(jQuery,this,this.document),function(t){Foundation.libs.tooltip={name:"tooltip",version:"5.0.3",settings:{additional_inheritable_classes:[],tooltip_class:".tooltip",append_to:"body",touch_close_text:"Tap To Close",disable_for_touch:!1,tip_template:function(t,e){return'<span data-selector="'+t+'" class="'+Foundation.libs.tooltip.settings.tooltip_class.substring(1)+'">'+e+'<span class="nub"></span></span>'}},cache:{},init:function(t,e,s){this.bindings(e,s)},events:function(){var e=this;Modernizr.touch?t(this.scope).off(".tooltip").on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip","[data-tooltip]",function(s){var i=t.extend({},e.settings,e.data_options(t(this)));i.disable_for_touch||(s.preventDefault(),t(i.tooltip_class).hide(),e.showOrCreateTip(t(this)))}).on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip",this.settings.tooltip_class,function(e){e.preventDefault(),t(this).fadeOut(150)}):t(this.scope).off(".tooltip").on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip","[data-tooltip]",function(s){var i=t(this);/enter|over/i.test(s.type)?e.showOrCreateTip(i):("mouseout"===s.type||"mouseleave"===s.type)&&e.hide(i)})},showOrCreateTip:function(t){var e=this.getTip(t);return e&&e.length>0?this.show(t):this.create(t)},getTip:function(e){var s=this.selector(e),i=null;return s&&(i=t('span[data-selector="'+s+'"]'+this.settings.tooltip_class)),"object"==typeof i?i:!1},selector:function(t){var e=t.attr("id"),s=t.attr("data-tooltip")||t.attr("data-selector");return(e&&e.length<1||!e)&&"string"!=typeof s&&(s="tooltip"+Math.random().toString(36).substring(7),t.attr("data-selector",s)),e&&e.length>0?e:s},create:function(e){var s=t(this.settings.tip_template(this.selector(e),t("<div></div>").html(e.attr("title")).html())),i=this.inheritable_classes(e);s.addClass(i).appendTo(this.settings.append_to),Modernizr.touch&&s.append('<span class="tap-to-close">'+this.settings.touch_close_text+"</span>"),e.removeAttr("title").attr("title",""),this.show(e)},reposition:function(e,s,i){var n,a,r,o,l;if(s.css("visibility","hidden").show(),n=e.data("width"),a=s.children(".nub"),r=a.outerHeight(),o=a.outerHeight(),s.css({width:n?n:"auto"}),l=function(t,e,s,i,n){return t.css({top:e?e:"auto",bottom:i?i:"auto",left:n?n:"auto",right:s?s:"auto"}).end()},l(s,e.offset().top+e.outerHeight()+10,"auto","auto",e.offset().left),this.small())l(s,e.offset().top+e.outerHeight()+10,"auto","auto",12.5,t(this.scope).width()),s.addClass("tip-override"),l(a,-r,"auto","auto",e.offset().left);else{var d=e.offset().left;Foundation.rtl&&(d=e.offset().left+e.offset().width-s.outerWidth()),l(s,e.offset().top+e.outerHeight()+10,"auto","auto",d),s.removeClass("tip-override"),i&&i.indexOf("tip-top")>-1?l(s,e.offset().top-s.outerHeight()-10,"auto","auto",d).removeClass("tip-override"):i&&i.indexOf("tip-left")>-1?l(s,e.offset().top+e.outerHeight()/2-s.outerHeight()/2,"auto","auto",e.offset().left-s.outerWidth()-r).removeClass("tip-override"):i&&i.indexOf("tip-right")>-1&&l(s,e.offset().top+e.outerHeight()/2-s.outerHeight()/2,"auto","auto",e.offset().left+e.outerWidth()+r).removeClass("tip-override")}s.css("visibility","visible").hide()},small:function(){return matchMedia(Foundation.media_queries.small).matches},inheritable_classes:function(e){var s=["tip-top","tip-left","tip-bottom","tip-right","noradius"].concat(this.settings.additional_inheritable_classes),i=e.attr("class"),n=i?t.map(i.split(" "),function(e){return-1!==t.inArray(e,s)?e:void 0}).join(" "):"";return t.trim(n)},show:function(t){var e=this.getTip(t);this.reposition(t,e,t.attr("class")),e.fadeIn(150)},hide:function(t){var e=this.getTip(t);e.fadeOut(150)},reload:function(){var e=t(this);return e.data("fndtn-tooltips")?e.foundationTooltips("destroy").foundationTooltips("init"):e.foundationTooltips("init")},off:function(){t(this.scope).off(".fndtn.tooltip"),t(this.settings.tooltip_class).each(function(e){t("[data-tooltip]").get(e).attr("title",t(this).text())}).remove()},reflow:function(){}}}(jQuery,this,this.document),function(t,e,s){Foundation.libs.topbar={name:"topbar",version:"5.0.3",settings:{index:0,sticky_class:"sticky",custom_back_text:!0,back_text:"Back",is_hover:!0,mobile_show_parent_link:!1,scrolltop:!0},init:function(e,s,i){Foundation.inherit(this,"addCustomRule register_media throttle");var n=this;n.register_media("topbar","foundation-mq-topbar"),this.bindings(s,i),t("[data-topbar]",this.scope).each(function(){var e=t(this),s=e.data("topbar-init");t("section",this),t("> ul",this).first(),e.data("index",0);var i=e.parent();i.hasClass("fixed")||i.hasClass(s.sticky_class)?(n.settings.sticky_class=s.sticky_class,n.settings.sticky_topbar=e,e.data("height",i.outerHeight()),e.data("stickyoffset",i.offset().top)):e.data("height",e.outerHeight()),s.assembled||n.assemble(e),s.is_hover?t(".has-dropdown",e).addClass("not-click"):t(".has-dropdown",e).removeClass("not-click"),n.addCustomRule(".f-topbar-fixed { padding-top: "+e.data("height")+"px }"),i.hasClass("fixed")&&t("body").addClass("f-topbar-fixed")})},toggle:function(s){var i=this;if(s)var n=t(s).closest("[data-topbar]");else var n=t("[data-topbar]");var a=n.data("topbar-init"),r=t("section, .section",n);i.breakpoint()&&(i.rtl?(r.css({right:"0%"}),t(">.name",r).css({right:"100%"})):(r.css({left:"0%"}),t(">.name",r).css({left:"100%"})),t("li.moved",r).removeClass("moved"),n.data("index",0),n.toggleClass("expanded").css("height","")),a.scrolltop?n.hasClass("expanded")?n.parent().hasClass("fixed")&&(a.scrolltop?(n.parent().removeClass("fixed"),n.addClass("fixed"),t("body").removeClass("f-topbar-fixed"),e.scrollTo(0,0)):n.parent().removeClass("expanded")):n.hasClass("fixed")&&(n.parent().addClass("fixed"),n.removeClass("fixed"),t("body").addClass("f-topbar-fixed")):(n.parent().hasClass(i.settings.sticky_class)&&n.parent().addClass("fixed"),n.parent().hasClass("fixed")&&(n.hasClass("expanded")?(n.addClass("fixed"),n.parent().addClass("expanded"),t("body").addClass("f-topbar-fixed")):(n.removeClass("fixed"),n.parent().removeClass("expanded"),i.update_sticky_positioning())))},timer:null,events:function(){var s=this;t(this.scope).off(".topbar").on("click.fndtn.topbar","[data-topbar] .toggle-topbar",function(t){t.preventDefault(),s.toggle(this)}).on("click.fndtn.topbar","[data-topbar] li.has-dropdown",function(e){var i=t(this),n=t(e.target),a=i.closest("[data-topbar]"),r=a.data("topbar-init");return n.data("revealId")?(s.toggle(),void 0):(s.breakpoint()||(!r.is_hover||Modernizr.touch)&&(e.stopImmediatePropagation(),i.hasClass("hover")?(i.removeClass("hover").find("li").removeClass("hover"),i.parents("li.hover").removeClass("hover")):(i.addClass("hover"),"A"===n[0].nodeName&&n.parent().hasClass("has-dropdown")&&e.preventDefault())),void 0)}).on("click.fndtn.topbar","[data-topbar] .has-dropdown>a",function(e){if(s.breakpoint()){e.preventDefault();var i=t(this),n=i.closest("[data-topbar]"),a=n.find("section, .section"),r=(i.next(".dropdown").outerHeight(),i.closest("li"));n.data("index",n.data("index")+1),r.addClass("moved"),s.rtl?(a.css({right:-(100*n.data("index"))+"%"}),a.find(">.name").css({right:100*n.data("index")+"%"})):(a.css({left:-(100*n.data("index"))+"%"}),a.find(">.name").css({left:100*n.data("index")+"%"})),n.css("height",i.siblings("ul").outerHeight(!0)+n.data("height"))}}),t(e).off(".topbar").on("resize.fndtn.topbar",s.throttle(function(){s.resize.call(s)},50)).trigger("resize"),t("body").off(".topbar").on("click.fndtn.topbar touchstart.fndtn.topbar",function(e){var s=t(e.target).closest("li").closest("li.hover");s.length>0||t("[data-topbar] li").removeClass("hover")}),t(this.scope).on("click.fndtn.topbar","[data-topbar] .has-dropdown .back",function(e){e.preventDefault();var i=t(this),n=i.closest("[data-topbar]"),a=n.find("section, .section"),r=(n.data("topbar-init"),i.closest("li.moved")),o=r.parent();n.data("index",n.data("index")-1),s.rtl?(a.css({right:-(100*n.data("index"))+"%"}),a.find(">.name").css({right:100*n.data("index")+"%"})):(a.css({left:-(100*n.data("index"))+"%"}),a.find(">.name").css({left:100*n.data("index")+"%"})),0===n.data("index")?n.css("height",""):n.css("height",o.outerHeight(!0)+n.data("height")),setTimeout(function(){r.removeClass("moved")},300)})},resize:function(){var e=this;t("[data-topbar]").each(function(){var i=t(this);i.data("topbar-init");var n,a=i.parent("."+e.settings.sticky_class);if(!e.breakpoint()){var r=i.hasClass("expanded");i.css("height","").removeClass("expanded").find("li").removeClass("hover"),r&&e.toggle(i)}a.length>0&&(a.hasClass("fixed")?(a.removeClass("fixed"),n=a.offset().top,t(s.body).hasClass("f-topbar-fixed")&&(n-=i.data("height")),i.data("stickyoffset",n),a.addClass("fixed")):(n=a.offset().top,i.data("stickyoffset",n)))})},breakpoint:function(){return!matchMedia(Foundation.media_queries.topbar).matches},assemble:function(e){var s=e.data("topbar-init"),i=t("section",e);t("> ul",e).first(),i.detach(),t(".has-dropdown>a",i).each(function(){var e=t(this),i=e.siblings(".dropdown"),n=e.attr("href");if(s.mobile_show_parent_link&&n&&n.length>1)var a=t('<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li><li><a class="parent-link js-generated" href="'+n+'">'+e.text()+"</a></li>");else var a=t('<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li>');1==s.custom_back_text?t("h5>a",a).html(s.back_text):t("h5>a",a).html("&laquo; "+e.html()),i.prepend(a)}),i.appendTo(e),this.sticky(),this.assembled(e)},assembled:function(e){e.data("topbar-init",t.extend({},e.data("topbar-init"),{assembled:!0}))},height:function(e){var s=0;return t("> li",e).each(function(){s+=t(this).outerHeight(!0)}),s},sticky:function(){var s=(t(e),this);t(e).on("scroll",function(){s.update_sticky_positioning()})},update_sticky_positioning:function(){var s="."+this.settings.sticky_class,i=t(e);if(t(s).length>0){var n=this.settings.sticky_topbar.data("stickyoffset");t(s).hasClass("expanded")||(i.scrollTop()>n?t(s).hasClass("fixed")||(t(s).addClass("fixed"),t("body").addClass("f-topbar-fixed")):i.scrollTop()<=n&&t(s).hasClass("fixed")&&(t(s).removeClass("fixed"),t("body").removeClass("f-topbar-fixed")))}},off:function(){t(this.scope).off(".fndtn.topbar"),t(e).off(".fndtn.topbar")},reflow:function(){}}}(jQuery,this,this.document),function(){var t;t=function(){function t(e,s){this.form_field=e,this.options=null!=s?s:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return t.prototype.set_default_values=function(){return this.click_test_action=function(t){return function(e){return t.test_active_click(e)}}(this),this.activate_action=function(t){return function(e){return t.activate_field(e)}}(this),this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},t.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){if(this.is_multiple){if(!this.active_field)return setTimeout(function(t){return function(){return t.container_mousedown()}}(this),50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(){return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(t){return function(){return t.blur_test()}}(this),100))},t.prototype.results_option_build=function(t){var e,s,i,n,a;for(e="",a=this.results_data,i=0,n=a.length;n>i;i++)s=a[i],e+=s.group?this.result_add_group(s):this.result_add_option(s),(null!=t?t.first:void 0)&&(s.selected&&this.is_multiple?this.choice_build(s):s.selected&&!this.is_multiple&&this.single_set_selected_text(s.text));return e},t.prototype.result_add_option=function(t){var e,s;return t.search_match?this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),s=document.createElement("li"),s.className=e.join(" "),s.style.cssText=t.style,s.setAttribute("data-option-array-index",t.array_index),s.innerHTML=t.search_text,this.outerHTML(s)):"":""},t.prototype.result_add_group=function(t){var e;return t.search_match||t.group_match?t.active_options>0?(e=document.createElement("li"),e.className="group-result",e.innerHTML=t.search_text,this.outerHTML(e)):"":""},t.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},t.prototype.reset_single_select_options=function(){var t,e,s,i,n;for(i=this.results_data,n=[],e=0,s=i.length;s>e;e++)t=i[e],t.selected?n.push(t.selected=!1):n.push(void 0);return n},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,s,i,n,a,r,o,l,d,c,h,u;for(this.no_results_clear(),n=0,r=this.get_search_text(),t=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=this.search_contains?"":"^",s=new RegExp(i+t,"i"),d=new RegExp(t,"i"),u=this.results_data,c=0,h=u.length;h>c;c++)e=u[c],e.search_match=!1,a=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(a=this.results_data[e.group_array_index],0===a.active_options&&a.search_match&&(n+=1),a.active_options+=1),(!e.group||this.group_search)&&(e.search_text=e.group?e.label:e.html,e.search_match=this.search_string_match(e.search_text,s),e.search_match&&!e.group&&(n+=1),e.search_match?(r.length&&(o=e.search_text.search(d),l=e.search_text.substr(0,o+r.length)+"</em>"+e.search_text.substr(o+r.length),e.search_text=l.substr(0,o)+"<em>"+l.substr(o)),null!=a&&(a.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),1>n&&r.length?(this.update_results_content(""),this.no_results(r)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.search_string_match=function(t,e){var s,i,n,a;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(i=t.replace(/\[|\]/g,"").split(" "),i.length))for(n=0,a=i.length;a>n;n++)if(s=i[n],e.test(s))return!0},t.prototype.choices_count=function(){var t,e,s,i;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,i=this.form_field.options,e=0,s=i.length;s>e;e++)t=i[e],t.selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){return t.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},t.prototype.keyup_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.clipboard_event_checker=function(){return setTimeout(function(t){return function(){return t.results_search()}}(this),50)},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return this.is_multiple&&!this.display_selected_options&&t.selected?!1:!this.display_disabled_options&&t.disabled?!1:t.empty?!1:!0},t.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},t.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},t.prototype.search_results_touchend=function(t){return this.touch_started?this.search_results_mouseup(t):void 0},t.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:(e=document.createElement("div"),e.appendChild(t),e.innerHTML)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),window.AbstractChosen=t}.call(this),function(){var t;t=function(){function t(){this.options_index=0,this.parsed=[]
}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,s,i,n,a,r;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),a=t.childNodes,r=[],i=0,n=a.length;n>i;i++)s=a[i],r.push(this.add_option(s,e,t.disabled));return r},t.prototype.add_option=function(t,e,s){return"OPTION"===t.nodeName.toUpperCase()?(""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:s===!0?s:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},t.prototype.escapeExpression=function(t){var e,s;return null==t||t===!1?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(s,function(t){return e[t]||"&amp;"})):t},t}(),t.select_to_array=function(e){var s,i,n,a,r;for(i=new t,r=e.childNodes,n=0,a=r.length;a>n;n++)s=r[n],i.add_node(s);return i.parsed},window.SelectParser=t}.call(this),function(){var t,e,s={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=jQuery,t.fn.extend({chosen:function(s){return AbstractChosen.browser_is_supported()?this.each(function(){var i,n;i=t(this),n=i.data("chosen"),"destroy"===s&&n?n.destroy():n||i.data("chosen",new e(this,s))}):this}}),e=function(e){function s(){return s.__super__.constructor.apply(this,arguments)}return i(s,e),s.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},s.prototype.set_up_html=function(){var e,s;return e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),s={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(s.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",s),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},s.prototype.register_observers=function(){return this.container.bind("mousedown.chosen",function(t){return function(e){t.container_mousedown(e)}}(this)),this.container.bind("mouseup.chosen",function(t){return function(e){t.container_mouseup(e)}}(this)),this.container.bind("mouseenter.chosen",function(t){return function(e){t.mouse_enter(e)}}(this)),this.container.bind("mouseleave.chosen",function(t){return function(e){t.mouse_leave(e)}}(this)),this.search_results.bind("mouseup.chosen",function(t){return function(e){t.search_results_mouseup(e)}}(this)),this.search_results.bind("mouseover.chosen",function(t){return function(e){t.search_results_mouseover(e)}}(this)),this.search_results.bind("mouseout.chosen",function(t){return function(e){t.search_results_mouseout(e)}}(this)),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){return function(e){t.search_results_mousewheel(e)}}(this)),this.search_results.bind("touchstart.chosen",function(t){return function(e){t.search_results_touchstart(e)}}(this)),this.search_results.bind("touchmove.chosen",function(t){return function(e){t.search_results_touchmove(e)}}(this)),this.search_results.bind("touchend.chosen",function(t){return function(e){t.search_results_touchend(e)}}(this)),this.form_field_jq.bind("chosen:updated.chosen",function(t){return function(e){t.results_update_field(e)}}(this)),this.form_field_jq.bind("chosen:activate.chosen",function(t){return function(e){t.activate_field(e)}}(this)),this.form_field_jq.bind("chosen:open.chosen",function(t){return function(e){t.container_mousedown(e)}}(this)),this.form_field_jq.bind("chosen:close.chosen",function(t){return function(e){t.input_blur(e)}}(this)),this.search_field.bind("blur.chosen",function(t){return function(e){t.input_blur(e)}}(this)),this.search_field.bind("keyup.chosen",function(t){return function(e){t.keyup_checker(e)}}(this)),this.search_field.bind("keydown.chosen",function(t){return function(e){t.keydown_checker(e)}}(this)),this.search_field.bind("focus.chosen",function(t){return function(e){t.input_focus(e)}}(this)),this.search_field.bind("cut.chosen",function(t){return function(e){t.clipboard_event_checker(e)}}(this)),this.search_field.bind("paste.chosen",function(t){return function(e){t.clipboard_event_checker(e)}}(this)),this.is_multiple?this.search_choices.bind("click.chosen",function(t){return function(e){t.choices_click(e)}}(this)):this.container.bind("click.chosen",function(t){t.preventDefault()})},s.prototype.destroy=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},s.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},s.prototype.container_mousedown=function(e){return this.is_disabled||(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null!=e&&t(e.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},s.prototype.container_mouseup=function(t){return"ABBR"!==t.target.nodeName||this.is_disabled?void 0:this.results_reset(t)},s.prototype.search_results_mousewheel=function(t){var e;return t.originalEvent&&(e=-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e?(t.preventDefault(),"DOMMouseScroll"===t.type&&(e=40*e),this.search_results.scrollTop(e+this.search_results.scrollTop())):void 0},s.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},s.prototype.close_field=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},s.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},s.prototype.test_active_click=function(e){var s;return s=t(e.target).closest(".chosen-container"),s.length&&this.container[0]===s[0]?this.active_field=!0:this.close_field()},s.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=SelectParser.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},s.prototype.result_do_highlight=function(t){var e,s,i,n,a;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),i=parseInt(this.search_results.css("maxHeight"),10),a=this.search_results.scrollTop(),n=i+a,s=this.result_highlight.position().top+this.search_results.scrollTop(),e=s+this.result_highlight.outerHeight(),e>=n)return this.search_results.scrollTop(e-i>0?e-i:0);if(a>s)return this.search_results.scrollTop(s)}},s.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},s.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},s.prototype.update_results_content=function(t){return this.search_results.html(t)},s.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},s.prototype.set_tab_index=function(){var t;return this.form_field.tabIndex?(t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t):void 0},s.prototype.set_label_behavior=function(){return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(t){return function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()}}(this)):void 0},s.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},s.prototype.search_results_mouseup=function(e){var s;return s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),s.length?(this.result_highlight=s,this.result_select(e),this.search_field.focus()):void 0},s.prototype.search_results_mouseover=function(e){var s;return s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),s?this.result_do_highlight(s):void 0},s.prototype.search_results_mouseout=function(e){return t(e.target).hasClass("active-result")?this.result_clear_highlight():void 0},s.prototype.choice_build=function(e){var s,i;return s=t("<li />",{"class":"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?s.addClass("search-choice-disabled"):(i=t("<a />",{"class":"search-choice-close","data-option-array-index":e.array_index}),i.bind("click.chosen",function(t){return function(e){return t.choice_destroy_link_click(e)}}(this)),s.append(i)),this.search_container.before(s)},s.prototype.choice_destroy_link_click=function(e){return e.preventDefault(),e.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(t(e.target))},s.prototype.choice_destroy=function(t){return this.result_deselect(t[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()):void 0},s.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},s.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},s.prototype.result_select=function(t){var e,s;return this.result_highlight?(e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),s=this.results_data[e[0].getAttribute("data-option-array-index")],s.selected=!0,this.form_field.options[s.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(s):this.single_set_selected_text(s.text),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[s.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},s.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},s.prototype.result_deselect=function(t){var e;return e=this.results_data[t],this.form_field.options[e.options_index].disabled?!1:(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},s.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},s.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},s.prototype.winnow_results_set_highlight=function(){var t,e;return e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),t=e.length?e.first():this.search_results.find(".active-result").first(),null!=t?this.result_do_highlight(t):void 0},s.prototype.no_results=function(e){var s;return s=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),s.find("span").first().html(e),this.search_results.append(s),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},s.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},s.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},s.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},s.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},s.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},s.prototype.keydown_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},s.prototype.search_field_scale=function(){var e,s,i,n,a,r,o,l,d;if(this.is_multiple){for(i=0,o=0,a="position:absolute; left: -1000px; top: -1000px; display:none;",r=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,d=r.length;d>l;l++)n=r[l],a+=n+":"+this.search_field.css(n)+";";return e=t("<div />",{style:a}),e.text(this.search_field.val()),t("body").append(e),o=e.width()+25,e.remove(),s=this.container.outerWidth(),o>s-10&&(o=s-10),this.search_field.css({width:o+"px"})}},s}(AbstractChosen)}.call(this);